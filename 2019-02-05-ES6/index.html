<!DOCTYPE html><html class="theme-next pisces" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#fff"><link rel="preload" href="https://cdn.jsdelivr.net/gh/DIYgod/diygod.me@gh-pages/fonts/Candyshop.otf" as="font" type="font/otf" crossorigin="anonymous"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css"><link href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css" rel="stylesheet" type="text/css"><link href="/css/main.css?v=0.0.74" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=0.0.74"><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon.ico?v=0.0.74"><link rel="mask-icon" href="/safari-pinned-tab.svg?v=0.0.74" color="#fff"><link rel="manifest" href="/manifest.json"><meta name="keywords" content="JavaScript,"><link rel="alternate" href="/atom.xml" title="Hi, いざよい" type="application/atom+xml"><meta name="description" content="es6一些语法"><meta property="og:type" content="article"><meta property="og:title" content="ES6"><meta property="og:url" content="https://everbrez.github.io/2019-02-05-ES6/index.html"><meta property="og:site_name" content="Hi, いざよい"><meta property="og:description" content="es6一些语法"><meta property="og:locale"><meta property="article:published_time" content="2019-02-05T00:00:00.000Z"><meta property="article:modified_time" content="2021-04-18T11:43:07.037Z"><meta property="article:author" content="everbrez"><meta property="article:tag" content="JavaScript"><meta name="twitter:card" content="summary"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"",scheme:"Pisces",version:"0.0.74",sidebar:{position:"right",display:"always",offset:52,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!1,tabs:!0,motion:{enable:!1,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},since:"4/18/2021 18:00:00",site:{title:"",subtitle:"",author:""},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},leancloud:{enable:!1,appID:"",appKey:""},favicon:{visibilitychange:!0,narmal:"/assets/favicon.ico",hidden:"/assets/favicon.ico",show_text:"(/≧▽≦/)咦！又好了！",hide_text:"(●—●)喔哟，崩溃啦！"}}</script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/disqusjs@1.2.2/dist/disqus.js"></script><link rel="canonical" href="https://everbrez.github.io/2019-02-05-ES6/"><title>ES6 | Hi, いざよい</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans" class="theme-darling"><div class="container sidebar-position-right page-post-detail"><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-首页"><a href="/" rel="section"><i class="menu-item-icon fas fa-meteor"></i><br>首页</a></li><li class="menu-item menu-item-归档"><a href="/archives/" rel="section"><i class="menu-item-icon fas fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-关于我"><a href="/about/" rel="section"><i class="menu-item-icon fas fa-heartbeat"></i><br>关于我</a></li><li class="menu-item search"><form class="search-form"><input name="keyword" type="text" class="search-input" placeholder="站内搜索"> <button type="submit" class="search-submit"><i class="fas fa-search"></i></button></form></li></ul></nav><div class="site-brand-wrapper"><div class="site-brand-bg"><picture><source srcset="https://cdn.jsdelivr.net/gh/DIYgod/diygod.me@gh-pages/images/header-gyx-s.webp" type="image/webp" media="(max-width: 500px)"><source srcset="https://cdn.jsdelivr.net/gh/DIYgod/diygod.me@gh-pages/images/header-gyx-s.png" type="image/png" media="(max-width: 500px)"><source srcset="https://cdn.jsdelivr.net/gh/DIYgod/diygod.me@gh-pages/images/header-gyx.webp" type="image/webp"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/DIYgod/diygod.me@gh-pages/images/header-gyx.png"></picture></div><div class="site-meta"><div class="custom-logo-site-title"><div class="brand"><span class="logo-line-before"><i></i></span><div class="site-title"><div id="animate-stroke" class="animate"><span><svg><use xlink:href="#strokeH"></use></svg> </span><span><svg><use xlink:href="#strokei"></use></svg> </span><span><svg><use xlink:href="#stroke,"></use></svg> </span><span><svg><use xlink:href="#stroke "></use></svg> </span><span><svg><use xlink:href="#strokeい"></use></svg> </span><span><svg><use xlink:href="#strokeざ"></use></svg> </span><span><svg><use xlink:href="#strokeよ"></use></svg> </span><span><svg><use xlink:href="#strokeい"></use></svg></span></div><div id="animate" class="animate"><span><svg><text id="strokeH">H</text></svg> </span><span><svg><text id="strokei">i</text></svg> </span><span><svg><text id="stroke,">,</text></svg> </span><span><svg><text id="stroke "></text></svg> </span><span><svg><text id="strokeい">い</text></svg> </span><span><svg><text id="strokeざ">ざ</text></svg> </span><span><svg><text id="strokeよ">よ</text></svg> </span><span><svg><text id="strokeい">い</text></svg></span></div><div id="guide" class="guide"><span>H</span><span>i</span><span>,</span><span> </span><span>い</span><span>ざ</span><span>よ</span><span>い</span></div></div><span class="logo-line-after"><i></i></span></div></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><div class="site-master" itemprop="author" itemscope itemtype="http://schema.org/Person"><picture><source srcset="/assets/images/avatar.webp" type="image/webp"><img loading="lazy" class="site-master-avatar scaleup" itemprop="image" src="/assets/images/avatar.jpg" alt=""></picture><h2 class="site-master-description scaleup" itemprop="description">If I could be the hero</h2></div></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-date"><div class="post-month">02月</div><div class="post-day">05</div></div><div class="post-badge"><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a></span></div><div class="post-block"><link itemprop="mainEntityOfPage" href="https://everbrez.github.io/2019-02-05-ES6/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content=""><meta itemprop="description" content=""><meta itemprop="image" content="/assets/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Hi, いざよい"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">ES6</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-05T00:00:00+00:00">2019-02-05</time> </span><span class="post-wordcount"><span class="post-meta-divider">•</span> <span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">字数统计</span> <span title="字数统计">7124</span></span></div></header><div class="post-body" itemprop="articleBody"><div class="post-toc-content"><div class="post-toc-title">文章目录</div><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ES6"><span class="nav-text">ES6</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9D%97%E7%8A%B6%E4%BD%9C%E7%94%A8%E5%9F%9F%E7%9A%84%E7%BB%91%E5%AE%9A"><span class="nav-text">块状作用域的绑定</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BB%BA%E8%AE%AE%EF%BC%9A%E9%BB%98%E8%AE%A4%E4%BD%BF%E7%94%A8const%EF%BC%8C%E5%AE%9E%E5%9C%A8%E9%9C%80%E8%A6%81%E6%94%B9%E5%8F%98%E5%80%BC%E6%97%B6%E4%BD%BF%E7%94%A8let"><span class="nav-text">建议：默认使用const，实在需要改变值时使用let</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E6%AD%A3%E5%88%99"><span class="nav-text">字符串和正则</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E8%AF%86%E5%88%AB"><span class="nav-text">子字符串的识别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%87%8D%E5%A4%8D"><span class="nav-text">字符串的重复</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E5%A4%8D%E5%88%B6"><span class="nav-text">正则表达式的复制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="nav-text">获取修饰符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E6%9D%BF%E5%AD%97%E9%9D%A2%E9%87%8F"><span class="nav-text">模板字面量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-text">多行字符串</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8D%A0%E4%BD%8D%E7%AC%A6"><span class="nav-text">字符串占位符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%87%E7%AD%BE%E6%A8%A1%E6%9D%BF"><span class="nav-text">标签模板</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%A7%8B%E5%80%BC"><span class="nav-text">使用原始值</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0%E5%80%BC"><span class="nav-text">函数默认参数值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#arguments%E5%AF%B9%E8%B1%A1"><span class="nav-text">arguments对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8D%E5%AE%9A%E5%8F%82%E6%95%B0"><span class="nav-text">不定参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%95%E5%BC%80%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-text">展开运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#new-target"><span class="nav-text">new.target</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9D%97%E7%8A%B6%E5%87%BD%E6%95%B0"><span class="nav-text">块状函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0"><span class="nav-text">箭头函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%BE%E8%B0%83%E7%94%A8%E4%BC%98%E5%8C%96"><span class="nav-text">尾调用优化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1"><span class="nav-text">对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%88%AB"><span class="nav-text">对象类别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E5%88%9D%E5%A7%8B%E5%80%BC%E7%9A%84%E7%AE%80%E5%86%99"><span class="nav-text">对象初始值的简写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95%E7%9A%84%E7%AE%80%E5%86%99"><span class="nav-text">对象方法的简写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AF%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="nav-text">可计算属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95"><span class="nav-text">新增方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Object-is"><span class="nav-text">Object.is()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Object-assign"><span class="nav-text">Object.assign()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Object-setPrototypeOf"><span class="nav-text">Object.setPrototypeOf()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#super"><span class="nav-text">super</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E6%9E%84"><span class="nav-text">解构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E8%A7%A3%E6%9E%84"><span class="nav-text">对象解构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC"><span class="nav-text">解构赋值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E5%AE%9A%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="nav-text">设定默认值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%9E%E5%90%8C%E5%90%8D%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC"><span class="nav-text">非同名变量赋值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B5%8C%E5%A5%97%E5%AF%B9%E8%B1%A1%E8%A7%A3%E6%9E%84"><span class="nav-text">嵌套对象解构</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E8%A7%A3%E6%9E%84"><span class="nav-text">数组解构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8D%E5%AE%9A%E5%85%83%E7%B4%A0"><span class="nav-text">不定元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E5%BA%94%E7%94%A8"><span class="nav-text">高级应用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E6%9E%84%E5%8F%82%E6%95%B0"><span class="nav-text">解构参数</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Symbol"><span class="nav-text">Symbol</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Symbol%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-text">Symbol的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Symbol%E5%85%B1%E4%BA%AB%E4%BD%93%E7%B3%BB"><span class="nav-text">Symbol共享体系</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Set%E4%B8%8EMap%E9%9B%86%E5%90%88"><span class="nav-text">Set与Map集合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Set%E9%9B%86%E5%90%88"><span class="nav-text">Set集合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#forEach"><span class="nav-text">forEach()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Set%E5%92%8C%E6%95%B0%E7%BB%84%E4%BA%92%E7%9B%B8%E8%BD%AC%E5%8C%96"><span class="nav-text">Set和数组互相转化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Weak-Set"><span class="nav-text">Weak Set</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Map%E9%9B%86%E5%90%88"><span class="nav-text">Map集合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Map-%E4%B8%8E-Array"><span class="nav-text">Map 与 Array</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#forEach-1"><span class="nav-text">forEach()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#WeakMap"><span class="nav-text">WeakMap</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Iterator-and-Generator"><span class="nav-text">Iterator and Generator</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87Symbol-iterator%E8%AE%BF%E9%97%AE%E9%BB%98%E8%AE%A4%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="nav-text">通过Symbol.iterator访问默认迭代器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E5%BB%BA%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="nav-text">内建迭代器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%8A%9F%E8%83%BD"><span class="nav-text">高级迭代器功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%99%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0"><span class="nav-text">给迭代器传递参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%8A%9B%E5%87%BA%E9%94%99%E8%AF%AF"><span class="nav-text">在迭代器抛出错误</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E5%99%A8%E8%BF%94%E5%9B%9E%E8%AF%AD%E5%8F%A5"><span class="nav-text">生成器返回语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A7%94%E6%89%98%E7%94%9F%E6%88%90%E5%99%A8"><span class="nav-text">委托生成器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1%E6%89%A7%E8%A1%8C"><span class="nav-text">异步任务执行</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JavaScript%E4%B8%AD%E7%9A%84%E7%B1%BB"><span class="nav-text">JavaScript中的类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E7%B1%BB%E5%A3%B0%E6%98%8E%E8%AF%AD%E6%B3%95"><span class="nav-text">基本的类声明语法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%B1%BB%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">类表达式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E5%91%BD%E5%90%8D%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">类命名表达式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E5%99%A8%E5%B1%9E%E6%80%A7"><span class="nav-text">访问器属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E5%99%A8%E6%96%B9%E6%B3%95"><span class="nav-text">生成器方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E6%88%90%E5%91%98"><span class="nav-text">静态成员</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%A7%E6%89%BF%E4%B8%8E%E6%B4%BE%E7%94%9F%E7%B1%BB"><span class="nav-text">继承与派生类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B4%BE%E7%94%9F%E7%B1%BB%E4%B8%AD%E5%8F%AF%E4%BB%A5%E7%BB%A7%E6%89%BF%E5%9F%BA%E7%B1%BB%E7%9A%84%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="nav-text">派生类中可以继承基类的静态方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B4%BE%E7%94%9F%E8%87%AA%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E7%B1%BB"><span class="nav-text">派生自表达式的类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%85%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%BB%A7%E6%89%BF"><span class="nav-text">内建对象的继承</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Symbol-species%E5%B1%9E%E6%80%A7"><span class="nav-text">Symbol.species属性</span></a></li></ol><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%94%B9%E8%BF%9B%E6%95%B0%E7%BB%84%E5%8A%9F%E8%83%BD"><span class="nav-text">改进数组功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E8%A7%86%E5%9B%BE%E6%93%8D%E4%BD%9C%E6%95%B0%E7%BB%84%E7%BC%93%E5%86%B2%E5%8C%BA"><span class="nav-text">通过视图操作数组缓冲区</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E8%A7%86%E5%9B%BE%E4%BF%A1%E6%81%AF"><span class="nav-text">获取视图信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%BB%E5%86%99%E6%95%B0%E6%8D%AE"><span class="nav-text">读写数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E5%9E%8B%E6%95%B0%E7%BB%84"><span class="nav-text">定型数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%AE%9A%E5%9E%8B%E6%95%B0%E7%BB%84"><span class="nav-text">创建定型数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%99%84%E5%8A%A0%E6%96%B9%E6%B3%95"><span class="nav-text">附加方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Promise"><span class="nav-text">Promise</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Promise%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-text">Promise的生命周期</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%B7%B2%E5%A4%84%E7%90%86%E7%9A%84Promise"><span class="nav-text">创建已处理的Promise</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E5%99%A8%E9%94%99%E8%AF%AF"><span class="nav-text">执行器错误</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E7%9A%84Promise%E6%8B%92%E7%BB%9D%E5%A4%84%E7%90%86"><span class="nav-text">全局的Promise拒绝处理</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%B2%E8%81%94Promise"><span class="nav-text">串联Promise</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8D%95%E8%8E%B7%E9%94%99%E8%AF%AF"><span class="nav-text">捕获错误</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Promise%E9%93%BE%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-text">Promise链的返回值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8Promise%E9%93%BE%E4%B8%AD%E8%BF%94%E5%9B%9EPromise"><span class="nav-text">在Promise链中返回Promise</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E5%A4%9A%E4%B8%AAPromise"><span class="nav-text">响应多个Promise</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Promise%E7%BB%A7%E6%89%BF"><span class="nav-text">Promise继承</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E7%90%86-Proxy-%E5%92%8C%E5%8F%8D%E5%B0%84-Reflection-API"><span class="nav-text">代理(Proxy)和反射(Reflection)API</span></a></li></div><p>es6一些语法</p><span id="more"></span><h1 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h1><h2 id="块状作用域的绑定"><a href="#块状作用域的绑定" class="headerlink" title="块状作用域的绑定"></a>块状作用域的绑定</h2><p>使用var声明的变量都会被当成当前作用域顶部声明的变量，这个就是变量提升（Hoisting）机制</p><ul><li>let 声明：let声明的变量不会提升，而且其作用域限制在函数内部以及块中（两个花括号之间）</li><li>const 声明：同let，但是const声明的变量不能改变其值，故用const声明的同时要初始化<br>注意事项：</li><li>被let或者const声明的变量，在同一作用域不能再被声明，否则会出现错误</li><li>使用let或者const声明的变量必须在声明之后才能使用（用typeof 操作符也不能），否则会出现错误</li><li>使用let或者const在全局作用域创建变量，不会添加为全局对象的属性，它只会遮蔽全局对象属性而不会覆盖</li><li>let或const声明的变量在循环中的行为是每次迭代创建新的绑定</li></ul><h3 id="建议：默认使用const，实在需要改变值时使用let"><a href="#建议：默认使用const，实在需要改变值时使用let" class="headerlink" title="建议：默认使用const，实在需要改变值时使用let"></a>建议：默认使用const，实在需要改变值时使用let</h3><h2 id="字符串和正则"><a href="#字符串和正则" class="headerlink" title="字符串和正则"></a>字符串和正则</h2><h3 id="子字符串的识别"><a href="#子字符串的识别" class="headerlink" title="子字符串的识别"></a>子字符串的识别</h3><ul><li>include()，如果字符串中检查到指定文本则返回true，否则返回false</li><li>startsWith()，如果字符串的起始部分检测到指定文本就返回true，否则返回false</li><li>endsWith()，如果字符串的结束部分检测到指定文本则返回true，否则返回false</li></ul><p><strong>他们都支持第二参数（可选）：指定开始搜索的索引值</strong></p><h3 id="字符串的重复"><a href="#字符串的重复" class="headerlink" title="字符串的重复"></a>字符串的重复</h3><p>repeat()方法，接收一个number参数，表示重复的次数，返回重复之后的新字符串</p><h3 id="正则表达式的复制"><a href="#正则表达式的复制" class="headerlink" title="正则表达式的复制"></a>正则表达式的复制</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> re1 = <span class="regexp">/ab/i</span>;</span><br><span class="line">re2 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(re1,<span class="string">&quot;g&quot;</span>); <span class="comment">//支持通过第二参数修改修饰符</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(re2.toString());    <span class="comment">//&quot;/ab/g&quot;</span></span><br></pre></td></tr></table></figure><h3 id="获取修饰符"><a href="#获取修饰符" class="headerlink" title="获取修饰符"></a>获取修饰符</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let re &#x3D; &#x2F;ab&#x2F;g;</span><br><span class="line"></span><br><span class="line">console.log(re.source); &#x2F;&#x2F;ab</span><br><span class="line">console.log(re.flags); &#x2F;&#x2F;g</span><br></pre></td></tr></table></figure><h3 id="模板字面量"><a href="#模板字面量" class="headerlink" title="模板字面量"></a>模板字面量</h3><p>模板字面量语法支持创建领域专用语法(DSL)</p><ul><li>多行字符串</li><li>基本的字符串格式化</li><li>HTML转义<h4 id="多行字符串"><a href="#多行字符串" class="headerlink" title="多行字符串"></a>多行字符串</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let message &#x3D; &#96;Multiline</span><br><span class="line">string&#96;;</span><br></pre></td></tr></table></figure></li></ul><p><strong>反撇号中所有的空白符都属于子字符串的一部分，要注意缩进</strong><br>可以这样写：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let html &#x3D; &#96;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;h1&gt;&lt;&#x2F;h1&gt;</span><br><span class="line">&lt;&#x2F;div&gt;&#96;;</span><br><span class="line">html.trim();</span><br></pre></td></tr></table></figure><p><strong>可以在模板字面量显式使用\n来指明换行符</strong></p><h4 id="字符串占位符"><a href="#字符串占位符" class="headerlink" title="字符串占位符"></a>字符串占位符</h4><p>在模板字面量中，可以把任何合法的Javascript表达式嵌入到占位符中并将其作为字符串的一部分输出到结果中。<br>占位符构成：<code>$&#123;表达式&#125;</code><br>如：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;Nicholas&quot;</span>,</span><br><span class="line">    message = <span class="string">`hello,<span class="subst">$&#123;name&#125;</span>!`</span>;</span><br><span class="line"><span class="built_in">console</span>.log(message); <span class="comment">//hello,Nicholas!</span></span><br></pre></td></tr></table></figure><p><strong>可以把一个模板字面量通过<code>$&#123;&#125;</code>嵌入到另一个模板字面量中</strong></p><h4 id="标签模板"><a href="#标签模板" class="headerlink" title="标签模板"></a>标签模板</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let message &#x3D; tag&#96;hello,world&#96;;</span><br></pre></td></tr></table></figure><p><strong>tag是一个函数，执行模板字面量上的转换并返回最终的字符串值</strong></p><p>标签函数使用不定参数来定义占位符，从而简化数据处理的过程</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tag</span>(<span class="params">literlas,...substitutions</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//返回一个字符串</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>literals包含一个额外属性raw，是包含每一个字面值的原生等价信息的数组，如：<code>literlas.raw[1]</code><br><strong>literlas.length - 1 === substitution.length</strong></p><h4 id="使用原始值"><a href="#使用原始值" class="headerlink" title="使用原始值"></a>使用原始值</h4><p>使用String.raw()作为tag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let message &#x3D; String.raw&#96;Multiline\nstring&#96;;</span><br><span class="line">console.log(message);&#x2F;&#x2F;&quot;Multiline\\nstring&quot;</span><br></pre></td></tr></table></figure><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="函数默认参数值"><a href="#函数默认参数值" class="headerlink" title="函数默认参数值"></a>函数默认参数值</h3><p>声明函数时，可以为任意参数指定默认值,只有不为参数传入值或者主动传入undefined时才会使用默认值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeRequest</span>(<span class="params">url,timeout = <span class="number">2000</span>,callback = <span class="keyword">function</span>()&#123;&#125;</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>null是一个合法值，故传入null时不会使用默认值</strong><br>还可以使用函数来得到默认的参数值</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> value = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getValue</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a,b = getValue()</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>也可以引用前面参数的值</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a,b = a</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="arguments对象"><a href="#arguments对象" class="headerlink" title="arguments对象"></a>arguments对象</h3><p>在ES6下，arguments对象将不随着形式参数的变化而变化。</p><h3 id="不定参数"><a href="#不定参数" class="headerlink" title="不定参数"></a>不定参数</h3><p>在函数命名参数前添加三个点(…)就表明这是一个不定参数，该参数是一个数组，包含着自它之后传入的所有参数</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a,...nums</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>每一个函数最多只能声明一个不定参数，并且要放在所有参数的末尾</strong></p><h3 id="展开运算符"><a href="#展开运算符" class="headerlink" title="展开运算符"></a>展开运算符</h3><p>可以指定一个数组，将他们打散之后作为各自独立的参数传入函数</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> values = [<span class="number">25</span>,<span class="number">50</span>,<span class="number">75</span>,<span class="number">100</span>];</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max(...values));</span><br></pre></td></tr></table></figure><h3 id="new-target"><a href="#new-target" class="headerlink" title="new.target"></a>new.target</h3><p>当通过new调用函数时，即调用函数的[[Construct]]方法，函数体内的new.target被赋值为new操作符的操作目标；当调用[[Call]]方法时，new.target的值为undefined。</p><h3 id="块状函数"><a href="#块状函数" class="headerlink" title="块状函数"></a>块状函数</h3><p>在块状作用域中声明的函数会被视为块状函数，但是使用function 操作符仍然会变量提升</p><h3 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h3><ul><li>箭头函数中this、super、arguments及new.target这些值由最近一层非箭头函数决定。</li><li>不能通过关键字new调用（没有[[Construct]]方法）</li><li>没有原型</li><li>不可以改变this值的绑定</li><li>不支持arguments对象</li><li>不支持重复的命名参数<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> getName = <span class="function">()=&gt;</span><span class="string">&quot;name&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> sum = <span class="function">(<span class="params">a,b</span>) =&gt;</span> a+b;</span><br><span class="line"><span class="keyword">let</span> sum2 = <span class="function">(<span class="params">a,b</span>) =&gt;</span> &#123;<span class="keyword">return</span> a+b;&#125;;</span><br><span class="line"><span class="keyword">let</span> reflect = <span class="function"><span class="params">value</span> =&gt;</span> value;</span><br><span class="line"><span class="keyword">let</span> doNothing = <span class="function">() =&gt;</span> &#123;&#125;;</span><br><span class="line">(<span class="function">(<span class="params">name</span>) =&gt;</span> &#123;<span class="built_in">console</span>.log(name)&#125;)(<span class="string">&quot;name&quot;</span>);<span class="comment">//创建并立即调用</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>箭头函数this的值取决于最近一层非箭头函数的this；否则this值会被设置为undefined</strong></p><h3 id="尾调用优化"><a href="#尾调用优化" class="headerlink" title="尾调用优化"></a>尾调用优化</h3><ul><li>尾调用布冯问当前栈的变量（也就是说函数不是一个闭包）</li><li>在函数内部，尾调用时最后一条语句</li><li>尾调用的结果作为函数值返回<br>常见递归优化：<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> factorial = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n &lt;= <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> n*factorial(n-<span class="number">1</span>); <span class="comment">//无法优化</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> factorial = <span class="function"><span class="keyword">function</span>(<span class="params">n,res = <span class="number">1</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n &lt;= <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>*res;</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        res *= n;</span><br><span class="line">        <span class="keyword">return</span> factorial(n-<span class="number">1</span>,res);<span class="comment">//可以优化</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><h3 id="对象类别"><a href="#对象类别" class="headerlink" title="对象类别"></a>对象类别</h3><ul><li>普通对象(Ordinary)：具有JavaScript所有的默认内部行为对象</li><li>特异对象(Exotic)：具有某些与默认行为不符的对象</li><li>标准对象(Standard)：ES6中定义的对象，如Array，Date等。其既可以是普通对象，也可以是特异对象</li><li>内建对象：脚本执行时就存在于JavaScript执行环境中的对象，所有的标准对象都是内建对象<h3 id="对象初始值的简写"><a href="#对象初始值的简写" class="headerlink" title="对象初始值的简写"></a>对象初始值的简写</h3>当一个对象的属性与本地变量同名时，不必再写冒号和值，简单地只写属性名即可。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Person = <span class="function"><span class="keyword">function</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        name,</span><br><span class="line">        age</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> person1 = <span class="keyword">new</span> Person(<span class="string">&quot;dengyf&quot;</span>,<span class="number">22</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person1.name);<span class="comment">//dengyf</span></span><br></pre></td></tr></table></figure><h3 id="对象方法的简写"><a href="#对象方法的简写" class="headerlink" title="对象方法的简写"></a>对象方法的简写</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    name: <span class="string">&quot;Micholas&quot;</span>,</span><br><span class="line">    <span class="function"><span class="title">sayname</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>简写方法可以使用super关键字</strong></p><h3 id="可计算属性"><a href="#可计算属性" class="headerlink" title="可计算属性"></a>可计算属性</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> suffix = <span class="string">&quot;name&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    [<span class="string">&quot;first&quot;</span> + suffix]: <span class="string">&quot;Nicholas&quot;</span>,</span><br><span class="line">    [<span class="string">`last<span class="subst">$&#123;suffix&#125;</span>`</span>]: <span class="string">&quot;Zakas&quot;</span> </span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(person[<span class="string">&quot;lastname&quot;</span>]);<span class="comment">//&quot;Zakas&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(person.firstname);<span class="comment">//&quot;Nicholas&quot;</span></span><br></pre></td></tr></table></figure><h3 id="新增方法"><a href="#新增方法" class="headerlink" title="新增方法"></a>新增方法</h3><h4 id="Object-is"><a href="#Object-is" class="headerlink" title="Object.is()"></a>Object.is()</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.is(<span class="literal">NaN</span>,<span class="literal">NaN</span>);<span class="comment">//true</span></span><br><span class="line"><span class="literal">NaN</span> === <span class="literal">NaN</span>; <span class="comment">//false</span></span><br><span class="line"><span class="built_in">Object</span>.is(+<span class="number">0</span>,-<span class="number">0</span>);<span class="comment">//false</span></span><br><span class="line">+<span class="number">0</span> === -<span class="number">0</span>; <span class="comment">//true</span></span><br></pre></td></tr></table></figure><h4 id="Object-assign"><a href="#Object-assign" class="headerlink" title="Object.assign()"></a>Object.assign()</h4><p>接收任意对象的源对象，并按指定顺序将属性复制到接收对象中。如果多个源对象具有同名属性，则排位靠后的源对象会覆盖排位靠前的。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> receiver = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.assign(receiver,&#123;</span><br><span class="line">    name: <span class="string">&quot;Nicolas&quot;</span>,</span><br><span class="line">    age:<span class="number">23</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    firstName: <span class="string">&quot;sed&quot;</span>,</span><br><span class="line">    age:<span class="number">11</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(receiver.age)<span class="comment">//11</span></span><br></pre></td></tr></table></figure><h4 id="Object-setPrototypeOf"><a href="#Object-setPrototypeOf" class="headerlink" title="Object.setPrototypeOf()"></a>Object.setPrototypeOf()</h4><p>接收两个参数，第一个是要改变原型的对象，第二个为替代第一个参数的对象<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">let</span> human = &#123;</span><br><span class="line">    <span class="function"><span class="title">getName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    name: <span class="string">&quot;Nicholas&quot;</span>,</span><br><span class="line">    age:<span class="number">22</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(person,human);</span><br><span class="line"><span class="built_in">console</span>.log(human.isPrototypeOf(person));<span class="comment">//true</span></span><br></pre></td></tr></table></figure><p></p><h4 id="super"><a href="#super" class="headerlink" title="super"></a>super</h4><p>一般当对象中一些方法与原型中方法重名时，调用原型中方法：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    name:<span class="string">&quot;person&quot;</span>,</span><br><span class="line">    <span class="function"><span class="title">getName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> dog = &#123;</span><br><span class="line">    name:<span class="string">&quot;dog&quot;</span>,</span><br><span class="line">    <span class="function"><span class="title">getName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> friend = &#123;</span><br><span class="line">    name:<span class="string">&quot;friend&quot;</span>,</span><br><span class="line">    <span class="function"><span class="title">getName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Object</span>.getPrototypeOf(<span class="built_in">this</span>).getName.call(<span class="built_in">this</span>) + <span class="built_in">this</span>.name; <span class="comment">//if don&#x27;t add call(this),will return &quot;perosn&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(friend,person);</span><br><span class="line">friend.getName();<span class="string">&quot;friendfriend&quot;</span></span><br></pre></td></tr></table></figure><p>而super就是简化<code>Object.getPrototypeOf(this).getName.call(this)</code><br>源代码变成：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> friend = &#123;</span><br><span class="line">    name:<span class="string">&quot;friend&quot;</span>,</span><br><span class="line">    <span class="function"><span class="title">getName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.getName() + <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>super.getName()始终指向perosn.getName()，其引用不是动态变化的</strong><br>ES6将一个方法定义为一个函数，它有一个内部的[[HomeObject]]属性来容纳这个方法从属的对象<br>super的引用第一步在其函数的[[HomeObject]]属性上调用Object.getPrototypeOf()方法检索原型，然后搜索原型找到同名函数，最后设置this绑定并且调用相应的方法。</p><h2 id="解构"><a href="#解构" class="headerlink" title="解构"></a>解构</h2><p>解构是一种打破数据结构，将其拆分成更小部分的过程。</p><h3 id="对象解构"><a href="#对象解构" class="headerlink" title="对象解构"></a>对象解构</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> node = &#123;</span><br><span class="line">    type: <span class="string">&quot;Identifier&quot;</span>,</span><br><span class="line">    name: <span class="string">&quot;foo&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;type,name&#125; = node;</span><br><span class="line"><span class="built_in">console</span>.log(type);<span class="comment">//&quot;Identifier&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(name);<span class="comment">//&quot;foo&quot;</span></span><br></pre></td></tr></table></figure><p><strong>使用let、const、var解构声明变量，必须提供初始化程序（等号右侧的值）</strong></p><h4 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(&#123;type,name&#125; = node)</span><br></pre></td></tr></table></figure><p><strong>代码块语句不允许出现在赋值语句左侧，所以上面的括号是不可缺少的</strong></p><h4 id="设定默认值"><a href="#设定默认值" class="headerlink" title="设定默认值"></a>设定默认值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> node = &#123;</span><br><span class="line">    type: <span class="string">&quot;Identifier&quot;</span>,</span><br><span class="line">    name: <span class="string">&quot;foo&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;type,name,value = <span class="literal">true</span>&#125; = node;</span><br><span class="line"><span class="built_in">console</span>.log(type);<span class="comment">//&quot;Identifier&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(name);<span class="comment">//&quot;foo&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(value);<span class="comment">//true</span></span><br></pre></td></tr></table></figure><h4 id="非同名变量赋值"><a href="#非同名变量赋值" class="headerlink" title="非同名变量赋值"></a>非同名变量赋值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> node = &#123;</span><br><span class="line">    type: <span class="string">&quot;Identifier&quot;</span>,</span><br><span class="line">    name: <span class="string">&quot;foo&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">type</span>:localType,<span class="attr">name</span>:localName = <span class="string">&quot;bar&quot;</span>&#125; = node;</span><br><span class="line"><span class="built_in">console</span>.log(localType);<span class="comment">//&quot;Identifier&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(localName);<span class="comment">//&quot;foo&quot;</span></span><br></pre></td></tr></table></figure><h4 id="嵌套对象解构"><a href="#嵌套对象解构" class="headerlink" title="嵌套对象解构"></a>嵌套对象解构</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> node = &#123;</span><br><span class="line">    type: &#123;</span><br><span class="line">        start:<span class="string">&quot;css&quot;</span>,</span><br><span class="line">        end:<span class="string">&quot;js&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    name: <span class="string">&quot;foo&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">type</span>:&#123;<span class="attr">start</span>:localStart&#125;&#125; = node;</span><br><span class="line"><span class="keyword">let</span> &#123;end&#125; = node.type;</span><br><span class="line"><span class="built_in">console</span>.log(localStart);<span class="comment">//css</span></span><br><span class="line"><span class="built_in">console</span>.log(end);<span class="comment">//js</span></span><br></pre></td></tr></table></figure><h3 id="数组解构"><a href="#数组解构" class="headerlink" title="数组解构"></a>数组解构</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [<span class="string">&quot;green&quot;</span>,[<span class="string">&quot;red&quot;</span>,<span class="string">&quot;light red&quot;</span>],<span class="string">&quot;blue&quot;</span>],</span><br><span class="line">    black = <span class="string">&quot;black&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> [firstColor = <span class="string">&quot;pink&quot;</span>,[,lightRed],thirdColor] = colors;</span><br><span class="line">[,,black] = colors;</span><br><span class="line"><span class="built_in">console</span>.log(lightRed);<span class="comment">//&quot;light red&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(firstColor);<span class="comment">//&quot;green&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(black);<span class="comment">//&quot;blue&quot;</span></span><br></pre></td></tr></table></figure><h4 id="不定元素"><a href="#不定元素" class="headerlink" title="不定元素"></a>不定元素</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [<span class="string">&quot;green&quot;</span>,[<span class="string">&quot;red&quot;</span>,<span class="string">&quot;light red&quot;</span>],<span class="string">&quot;blue&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> [firstColor,...restColor] = colors;</span><br><span class="line"><span class="built_in">console</span>.log(restColor.length);<span class="comment">//2</span></span><br></pre></td></tr></table></figure><h4 id="高级应用"><a href="#高级应用" class="headerlink" title="高级应用"></a>高级应用</h4><ul><li>交换两个数值<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&quot;a&quot;</span>,</span><br><span class="line">    b = <span class="string">&quot;b&quot;</span>;</span><br><span class="line">[a,b] = [b,a];</span><br><span class="line"><span class="built_in">console</span>.log(a);<span class="comment">//&quot;b&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(b);<span class="comment">//&quot;a&quot;</span></span><br></pre></td></tr></table></figure></li><li>复制数组<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [<span class="string">&quot;red&quot;</span>,<span class="string">&quot;green&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> [...colorsCopy] = colors;</span><br></pre></td></tr></table></figure><h4 id="解构参数"><a href="#解构参数" class="headerlink" title="解构参数"></a>解构参数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">name,value,&#123;secure,path,domain,expires&#125; = &#123;&#125;</span>)</span>&#123; <span class="comment">//define default</span></span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>设置默认值<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cookieDefault = &#123;</span><br><span class="line">    secure:<span class="literal">false</span>,</span><br><span class="line">    path:<span class="string">&quot;/&quot;</span>,</span><br><span class="line">    domain:<span class="string">&quot;example.com&quot;</span>,</span><br><span class="line">    expires:<span class="keyword">new</span> <span class="built_in">Date</span>()(<span class="built_in">Date</span>.now() + <span class="number">36000000</span>)</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">name,value,&#123;secure = cookieDefault.secure,path = cookieDefault.path,domain  = cookieDefault.domain,expires = cookieDefault.expires&#125; = cookieDefault</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h2>ES6引入的第六种原始类型:symbol-&gt;创建非字符串名称。<h3 id="Symbol的使用"><a href="#Symbol的使用" class="headerlink" title="Symbol的使用"></a>Symbol的使用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">let</span> firstName = <span class="built_in">Symbol</span>(<span class="string">&quot;first name&quot;</span>); <span class="comment">//接收一个可选参数，添加一段文本描述</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    [firstName] : <span class="string">&quot;Nicholas&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(person[firstName]);<span class="comment">//&quot;Nicholas&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(firstName.toString());<span class="comment">//&quot;Symbol(first name)&quot;</span></span><br></pre></td></tr></table></figure>symbol还可以用在<code>Object.defineProperty()</code>和<code>Object.defineProperties()</code>方法<h3 id="Symbol共享体系"><a href="#Symbol共享体系" class="headerlink" title="Symbol共享体系"></a>Symbol共享体系</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> uid = <span class="built_in">Symbol</span>.for(<span class="string">&quot;uid&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> o = &#123;&#125;;</span><br><span class="line">o[uid] = <span class="string">&quot;123&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(o[uid]);<span class="comment">//&quot;123&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(uid);<span class="comment">//&quot;Symbol(uid)&quot;</span></span><br></pre></td></tr></table></figure>Symbol.for()方法首先在全局Symbol注册表中搜索键为”iud”的Symbol是否存在，如果存在，直接返回已有的Symbol；否则，创建一个新的Symbol并使用这个键在Symbol全局注册表中注册，然后返回一个新创建的Symbol</li></ul><h2 id="Set与Map集合"><a href="#Set与Map集合" class="headerlink" title="Set与Map集合"></a>Set与Map集合</h2><ul><li>Set集合是一种无重复元素的列表</li><li>Map集合内含多组键值对<h3 id="Set集合"><a href="#Set集合" class="headerlink" title="Set集合"></a>Set集合</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">set.add(<span class="number">5</span>);</span><br><span class="line">set.add(<span class="string">&quot;5&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(set.size);<span class="comment">//2</span></span><br><span class="line"><span class="keyword">let</span> set1 = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">2</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(set.size);<span class="comment">//2</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>Set集合不会对所存值进行强制的类型转换</strong><br><strong>如果后续传入的值已经存在，则此次操作会被忽略</strong><br>通过has()方法检测Set集合是否存在某个值 —&gt;使用Object.is()判断是否相等</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(set.has(<span class="number">5</span>));<span class="comment">//true</span></span><br></pre></td></tr></table></figure><p>通过delete()方法移除Set集合中某一个元素，调用clear()方法移除集合中所有元素</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">set.add(<span class="number">5</span>);</span><br><span class="line">set.add(<span class="string">&quot;5&quot;</span>);</span><br><span class="line">set.delete(<span class="number">5</span>);</span><br><span class="line"><span class="built_in">console</span>.log(set.has(<span class="number">5</span>));<span class="comment">//false</span></span><br><span class="line">set.clear();</span><br><span class="line"><span class="built_in">console</span>.log(set.size);<span class="comment">//0</span></span><br></pre></td></tr></table></figure><h3 id="forEach"><a href="#forEach" class="headerlink" title="forEach()"></a>forEach()</h3><p>forEach()方法回调函数接收三个参数：</p><ul><li>Set集合中下一个索引位置</li><li>与第一个参数一样的值</li><li>被遍历的Set集合本身<br>Set中第一个和第二个参数完全一样<h3 id="Set和数组互相转化"><a href="#Set和数组互相转化" class="headerlink" title="Set和数组互相转化"></a>Set和数组互相转化</h3>Set —&gt; Array<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]);</span><br></pre></td></tr></table></figure>Array —&gt; Set<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array = [...set];</span><br></pre></td></tr></table></figure><h3 id="Weak-Set"><a href="#Weak-Set" class="headerlink" title="Weak Set"></a>Weak Set</h3>Weak Set只存储对象的弱引用，并且不可以存储原始值；集合中的弱引用如果是对象唯一的引用，则会被回收并释放相应内存。</li><li>WeakSet只有add、delete、has方法，不支持forEach、size、clear</li><li>WeakSet不暴露任何迭代器（例如keys()、value()方法），所以无法通过程序检测里面的内容</li><li>通过add、delete、has传入非对象参数都会导致程序报错</li><li>不能用于for-of循环<h3 id="Map集合"><a href="#Map集合" class="headerlink" title="Map集合"></a>Map集合</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;ECMAScript 6&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&quot;title&quot;</span>));<span class="comment">//&quot;ECMAScript 6&quot; 若不存在返回undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(map.has(<span class="string">&quot;title&quot;</span>));<span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(map.size);<span class="comment">//1</span></span><br><span class="line">map.delete(<span class="string">&quot;title&quot;</span>);</span><br><span class="line">map.clear();</span><br></pre></td></tr></table></figure><h3 id="Map-与-Array"><a href="#Map-与-Array" class="headerlink" title="Map 与 Array"></a>Map 与 Array</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([<span class="string">&quot;name&quot;</span>,<span class="string">&quot;Nicholas&quot;</span>],[<span class="string">&quot;age&quot;</span>,<span class="number">23</span>]);</span><br></pre></td></tr></table></figure><h3 id="forEach-1"><a href="#forEach-1" class="headerlink" title="forEach()"></a>forEach()</h3>回调函数接收三个参数</li><li>Map集合中下一次索引位置 value</li><li>值对应的键名 key</li><li>Map集合本身<h3 id="WeakMap"><a href="#WeakMap" class="headerlink" title="WeakMap"></a>WeakMap</h3>列表的键名必须是非null对象，键名对应的值可以是任何类型<br>通过set、get、has、delete操作，不支持clear和forEach</li></ul><h2 id="Iterator-and-Generator"><a href="#Iterator-and-Generator" class="headerlink" title="Iterator and Generator"></a>Iterator and Generator</h2><p>ES5创建一个迭代器方法</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> createIterator = <span class="function"><span class="keyword">function</span>(<span class="params">items</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="function"><span class="title">next</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> done = (i &gt;= items.length);</span><br><span class="line">            <span class="keyword">let</span> value = done? <span class="literal">undefined</span> : i++;</span><br><span class="line">            <span class="keyword">return</span>&#123;</span><br><span class="line">                done,</span><br><span class="line">                value</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ES6通过生成器创建迭代器</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> createIterator = <span class="function"><span class="keyword">function</span> *(<span class="params">items</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; items.length; i++)&#123;</span><br><span class="line">        <span class="keyword">yield</span> items[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> iterator = createIterator([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]);</span><br></pre></td></tr></table></figure><p>也可以这样：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">createIterator</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o = &#123;</span><br><span class="line">    *<span class="function"><span class="title">createIterator</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//do something</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>yield关键字可以返回任何值或者表达式</li><li>yield只能用在生成器内部，不能用在函数外部或者内部的函数，否则会报错</li><li>箭头函数不能使用yield关键字<h4 id="通过Symbol-iterator访问默认迭代器"><a href="#通过Symbol-iterator访问默认迭代器" class="headerlink" title="通过Symbol.iterator访问默认迭代器"></a>通过Symbol.iterator访问默认迭代器</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> values = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> iterator = values[<span class="built_in">Symbol</span>.iterator]();</span><br></pre></td></tr></table></figure>也可以给自定义对象添加生成器<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> collection = &#123;</span><br><span class="line">    items = [],</span><br><span class="line">    *[<span class="built_in">Symbol</span>.iterator]()&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">of</span> <span class="built_in">this</span>.items)&#123; </span><br><span class="line">            <span class="keyword">yield</span> item;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="内建迭代器"><a href="#内建迭代器" class="headerlink" title="内建迭代器"></a>内建迭代器</h3></li><li>entries() 返回一个迭代器，其值为多个键值对，以数组形式 –&gt; Map集合默认迭代器</li><li>values() 返回一个迭代器，其值为集合的值 –&gt; 数组和Set集合默认迭代器</li><li>keys() 返回一个迭代器，其值为集合中所有键名<br>使用<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [<span class="string">&quot;red&quot;</span>,<span class="string">&quot;green&quot;</span>,<span class="string">&quot;blue&quot;</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> color <span class="keyword">of</span> colors.entries())&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(color);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">of</span> colors.keys())&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>可以使用解构语法<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">data.set(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;Nicholas&quot;</span>);</span><br><span class="line">data.set(<span class="string">&quot;age&quot;</span>,<span class="number">34</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> [key,value] <span class="keyword">of</span> data)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key + <span class="string">&quot;=&quot;</span> + value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="高级迭代器功能"><a href="#高级迭代器功能" class="headerlink" title="高级迭代器功能"></a>高级迭代器功能</h3><h4 id="给迭代器传递参数"><a href="#给迭代器传递参数" class="headerlink" title="给迭代器传递参数"></a>给迭代器传递参数</h4>如果给迭代器的next()方法传递参数，则这个参数的值就会代替生成器内部上一条yield语句的返回值。</li></ul><p><strong>第一次调用next()方法时无论传入什么参数都会被丢弃</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">createIterator</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> first = <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> second = <span class="keyword">yield</span> first + <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">yield</span> second + <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> iterator = createIterator();</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());  <span class="comment">//首先调用yield 1</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next(<span class="number">4</span>));<span class="comment">//将4作为 yield 1 的返回值，并赋值给first，调用yield first+2</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next(<span class="number">5</span>));<span class="comment">//将5作为 yield first+2 的返回值，并赋值给second</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());<span class="comment">//调用 yield second + 3</span></span><br><span class="line"><span class="comment">//Object &#123;value: 1, done: false&#125;</span></span><br><span class="line"><span class="comment">// Object &#123;value: 6, done: false&#125;</span></span><br><span class="line"><span class="comment">// Object &#123;value: 8, done: false&#125;</span></span><br><span class="line"><span class="comment">// Object &#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure><h4 id="在迭代器抛出错误"><a href="#在迭代器抛出错误" class="headerlink" title="在迭代器抛出错误"></a>在迭代器抛出错误</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iterator.throw(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;Boom&quot;</span>));<span class="comment">//错误抛出并阻止代码继续执行</span></span><br></pre></td></tr></table></figure><h4 id="生成器返回语句"><a href="#生成器返回语句" class="headerlink" title="生成器返回语句"></a>生成器返回语句</h4><p>在生成器中，return表示所有操作已经完成，done被设置为true。在return后面的语句不会运行。最后一次next()调用可以通过return返回一个特定值。<br><strong>展开运算发与for-of循环会直接忽略指定的任意返回值，只要done变成true，就立即停止读取其他值</strong></p><h4 id="委托生成器"><a href="#委托生成器" class="headerlink" title="委托生成器"></a>委托生成器</h4><p>某些情况下，需要将两个迭代器合二为一，这时可以创建一个生成器，再给yield语句添加一个星号，可以将生成数据的过程委托给其他生成器</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">createNumberIterator</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">createColorIterator</span>(<span class="params">color</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&quot;red&quot;</span>;</span><br><span class="line">    <span class="keyword">yield</span> color;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">createCombinedIterator</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> *createNumberIterator(); <span class="comment">//返回值3</span></span><br><span class="line">    <span class="keyword">yield</span> *createColorIterator(<span class="string">&quot;green&quot;</span>);</span><br><span class="line">    <span class="keyword">yield</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> iterator = createCombinedIterator();</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());<span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());<span class="comment">//2</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());<span class="comment">//&quot;red&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());<span class="comment">//&quot;green&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());<span class="comment">//true</span></span><br></pre></td></tr></table></figure><p>**yield <em>可以直接用于字符串，此时使用字符串的默认迭代器。yield <em>“hello”</em></em></p><h4 id="异步任务执行"><a href="#异步任务执行" class="headerlink" title="异步任务执行"></a>异步任务执行</h4><p>简单的任务执行器</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params">taskDef</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//创建一个迭代器</span></span><br><span class="line">    <span class="keyword">let</span> task = taskDef();</span><br><span class="line">    <span class="comment">//开始执行task</span></span><br><span class="line">    <span class="keyword">let</span> result = task.next();</span><br><span class="line">    <span class="comment">//循环执行task</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">step</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!result.done)&#123;</span><br><span class="line">            result = task.next(result.value);</span><br><span class="line">            step();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//开始迭代</span></span><br><span class="line">    step();</span><br><span class="line">&#125;</span><br><span class="line">run(<span class="function"><span class="keyword">function</span> *(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">yield</span> <span class="number">3</span>*<span class="number">8</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="JavaScript中的类"><a href="#JavaScript中的类" class="headerlink" title="JavaScript中的类"></a>JavaScript中的类</h2><h3 id="基本的类声明语法"><a href="#基本的类声明语法" class="headerlink" title="基本的类声明语法"></a>基本的类声明语法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">sayName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> Person(<span class="string">&quot;Nicholas&quot;</span>);</span><br><span class="line">person.sayName();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> Person);<span class="comment">//function</span></span><br></pre></td></tr></table></figure><p><strong>不需要在类的各元素之间用逗号分隔，声明最后不需要分号</strong></p><ul><li>类声明与let声明类似，不能被提升</li><li>在类中，所有方法都是不可枚举</li><li>每一个类都有[[Construct]]内部方法，通过关键字调用，用new调用不含[[Construct]]其他方法会抛出错误</li><li>只能使用关键字new调用类，否则会抛出错误</li><li>类中修改类名会抛出错误<h5 id="类表达式"><a href="#类表达式" class="headerlink" title="类表达式"></a>类表达式</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Person = <span class="class"><span class="keyword">class</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="类命名表达式"><a href="#类命名表达式" class="headerlink" title="类命名表达式"></a>类命名表达式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Person = <span class="class"><span class="keyword">class</span> <span class="title">PersonType</span></span>&#123; <span class="comment">//Person可以在外部或者内部使用，可是PersonType只能在内部使用</span></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">sayName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line"><span class="keyword">let</span> Person = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="meta">    &quot;use strict&quot;</span></span><br><span class="line">    <span class="comment">//构造函数</span></span><br><span class="line">    <span class="keyword">const</span> PersonType = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">new</span>.target === <span class="literal">undefined</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;必须通过new关键字调用&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(PersonType.prototype,<span class="string">&quot;sayName&quot;</span>,&#123;</span><br><span class="line">        value:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">new</span>.target !== <span class="literal">undefined</span>)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;不可通过new调用&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);&#125;,</span><br><span class="line">        enumerable:<span class="literal">false</span>,</span><br><span class="line">        writable: <span class="literal">true</span>,</span><br><span class="line">        configurable: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> PersonType;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> Person(<span class="string">&quot;Nicholas&quot;</span>);</span><br><span class="line">person.sayName();</span><br></pre></td></tr></table></figure><h3 id="访问器属性"><a href="#访问器属性" class="headerlink" title="访问器属性"></a>访问器属性</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomHTMLElement</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">element</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.element = element;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">get</span> <span class="title">html</span>()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.element.innerHTML + <span class="string">&quot;hahaah&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span> <span class="title">html</span>(<span class="params">value</span>)&#123;</span><br><span class="line">        <span class="built_in">this</span>.element.innerHTML = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="生成器方法"><a href="#生成器方法" class="headerlink" title="生成器方法"></a>生成器方法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span>&#123;</span><br><span class="line">    *<span class="function"><span class="title">createIterator</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> instance = <span class="keyword">new</span> MyClass(),</span><br><span class="line">    iterator = instance.createIterator();</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());<span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next());<span class="comment">//2</span></span><br></pre></td></tr></table></figure><h3 id="静态成员"><a href="#静态成员" class="headerlink" title="静态成员"></a>静态成员</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">sayName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="title">create</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Person(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person = Person.create(<span class="string">&quot;Nicholas&quot;</span>);</span><br><span class="line">person.sayName();<span class="comment">//&quot;Nicholas&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> person.create);<span class="comment">//undefined</span></span><br></pre></td></tr></table></figure></li><li>不能将static用在构造函数上</li><li>不可在实例上访问静态成员<h3 id="继承与派生类"><a href="#继承与派生类" class="headerlink" title="继承与派生类"></a>继承与派生类</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">length,width</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.length = length;</span><br><span class="line">        <span class="built_in">this</span>.width = width;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">getArea</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.length * <span class="built_in">this</span>.width;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">Rectangle</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">length</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(length,length);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(Rectangle.isPrototypeOf(Square));<span class="comment">//true</span></span><br><span class="line"><span class="keyword">let</span> square = <span class="keyword">new</span> Square(<span class="number">4</span>);</span><br><span class="line"><span class="built_in">console</span>.log(square.getArea());<span class="comment">//16</span></span><br><span class="line"><span class="built_in">console</span>.log(square <span class="keyword">instanceof</span> Square);<span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(square <span class="keyword">instanceof</span> Rectangle);<span class="comment">//true</span></span><br></pre></td></tr></table></figure>如果派生类不使用构造函数，则当创建新的实例的时候会自动调用super()并传入所有参数。</li><li>使用extend的派生类构造函数一定要使用super，否则只能让构造函数返回一个对象。<h4 id="派生类中可以继承基类的静态方法"><a href="#派生类中可以继承基类的静态方法" class="headerlink" title="派生类中可以继承基类的静态方法"></a>派生类中可以继承基类的静态方法</h4><h3 id="派生自表达式的类"><a href="#派生自表达式的类" class="headerlink" title="派生自表达式的类"></a>派生自表达式的类</h3>只要表达式可以被解析为一个函数并具有[[Construct]]属性和原型，那么就可以用extend进行派生<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Rectangle</span>(<span class="params">length,width</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.length = length;</span><br><span class="line">        <span class="built_in">this</span>.width = width;</span><br><span class="line">&#125;</span><br><span class="line">Rectangle.prototype.getArea = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.length * <span class="built_in">this</span>.width;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBase</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Rectangle;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">getBase</span>()</span>&#123; <span class="comment">//使用表达式</span></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">length</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(length,length);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> square = <span class="keyword">new</span> Square(<span class="number">4</span>);</span><br><span class="line"><span class="built_in">console</span>.log(square.getArea());</span><br></pre></td></tr></table></figure><h4 id="内建对象的继承"><a href="#内建对象的继承" class="headerlink" title="内建对象的继承"></a>内建对象的继承</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyArray</span> <span class="keyword">extends</span> <span class="title">Array</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Symbol-species属性"><a href="#Symbol-species属性" class="headerlink" title="Symbol.species属性"></a>Symbol.species属性</h3></li></ul><h2 id="改进数组功能"><a href="#改进数组功能" class="headerlink" title="改进数组功能"></a>改进数组功能</h2><p>新增方法：<code>Array.of()</code>和<code>Array.from()</code><br>Array.from接收三个参数，第一个为类数组，第二个为映射函数，第三个为映射函数this的值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#96;&#96;&#96;fill()&#96;&#96;&#96;接收三个参数：要填充的值、开始索引、结束索引（不包含）</span><br><span class="line">&#96;&#96;&#96;copyWithin()&#96;&#96;&#96;接收两个参数，开始填充索引位置，开始复制索引</span><br><span class="line">### 定型数组</span><br><span class="line">#### 数组缓冲区</span><br><span class="line">数组缓冲区时所有定型数组的根基，他是一段可以包含特定数量字节的内存地址。</span><br><span class="line">&#96;&#96;&#96;JavaScript</span><br><span class="line">let buffer &#x3D; new ArrayBuffer(10);&#x2F;&#x2F;分配10字节</span><br></pre></td></tr></table></figure><p>可以通过byteLength来查看缓冲区中的比特数量</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(buffer.byteLength);<span class="comment">//10</span></span><br></pre></td></tr></table></figure><p>通过slice可以返回一个新的ArrayBuffer实例：传入开始索引和结束索引（不包括结束索引）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> buffer2 = buffer.slice(<span class="number">4</span>,<span class="number">6</span>);</span><br><span class="line"><span class="built_in">console</span>.log(buffer2.byteLength);<span class="comment">//2</span></span><br></pre></td></tr></table></figure><h4 id="通过视图操作数组缓冲区"><a href="#通过视图操作数组缓冲区" class="headerlink" title="通过视图操作数组缓冲区"></a>通过视图操作数组缓冲区</h4><p>DataView类型时一种通用的数组缓冲区视图，其支持所有8种数值数据类型</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> view = <span class="keyword">new</span> <span class="built_in">DataView</span>(buffer,<span class="number">5</span>,<span class="number">2</span>);<span class="comment">//选择索引5和索引6的字节 --&gt;可选参数</span></span><br></pre></td></tr></table></figure><h4 id="获取视图信息"><a href="#获取视图信息" class="headerlink" title="获取视图信息"></a>获取视图信息</h4><ul><li>buffer 视图绑定的数组缓冲区</li><li>byteOffset DataView构造函数第二参数，默认0</li><li>byteLength DataView构造函数第三参数，默认缓冲区长度<h4 id="读写数据"><a href="#读写数据" class="headerlink" title="读写数据"></a>读写数据</h4>get方法接收两个参数：读取数据时偏移的字节数量；和一个可选的布尔值，表示是否按照小端序进行读取<br>set方法接收三个参数，写入数据时偏移的字节数量，介入的值和一个布尔值，表示是否按照小端序格式存储</li><li>getInt8()</li><li>setUint8()<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> buffer = <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(<span class="number">2</span>);</span><br><span class="line">    view = <span class="keyword">new</span> <span class="built_in">DataView</span>(buffer);</span><br><span class="line">view.setInt8(<span class="number">0</span>,<span class="number">5</span>);</span><br><span class="line">view.setInt8(<span class="number">1</span>,-<span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(view.getInt8(<span class="number">0</span>));<span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(view.getInt8(<span class="number">1</span>))<span class="comment">//1</span></span><br></pre></td></tr></table></figure><h4 id="定型数组"><a href="#定型数组" class="headerlink" title="定型数组"></a>定型数组</h4>定型数组实际上是用于数组缓冲区的特定类型的视图，可以强制使用特定的数据类型，而不是使用通用的DataView对象来操作数组缓冲区<br>构造函数（部分）：</li><li>Int8Array()</li><li>Uint32Array()</li><li>Float64Array()</li><li>Uint8ClampedArray() –&gt;强制转换：小于0 =&gt; 0;大于225 =&gt; 225<h4 id="创建定型数组"><a href="#创建定型数组" class="headerlink" title="创建定型数组"></a>创建定型数组</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> buffer = <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(<span class="number">10</span>),</span><br><span class="line">    view1 = <span class="keyword">new</span> <span class="built_in">Int8Array</span>(buffer,<span class="number">5</span>,<span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(view1.byteLength);<span class="comment">//2</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> int = <span class="keyword">new</span> <span class="built_in">Int16Array</span>(<span class="number">2</span>),</span><br><span class="line">    float = <span class="keyword">new</span> <span class="built_in">Float32Array</span>(<span class="number">5</span>);</span><br><span class="line"><span class="built_in">console</span>.log(int.byteLength);<span class="comment">//4</span></span><br><span class="line"><span class="built_in">console</span>.log(int.length);<span class="comment">//2</span></span><br><span class="line"><span class="built_in">console</span>.log(float.byteLength);<span class="comment">//20</span></span><br><span class="line"><span class="built_in">console</span>.log(float.length);<span class="comment">//5</span></span><br></pre></td></tr></table></figure>可以将以下作为参数传入构造函数</li><li>一个定型数组</li><li>一个可迭代对象</li><li>一个数组</li><li>一个类数组对象<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> int = <span class="keyword">new</span> <span class="built_in">Int16Array</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(int.length);<span class="comment">//3</span></span><br><span class="line"><span class="built_in">console</span>.log(int.byteLength);<span class="comment">//6</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>定型数组不是Array实例</strong><br>当给定型数组传入非法值时，会用0来代替</p><h4 id="附加方法"><a href="#附加方法" class="headerlink" title="附加方法"></a>附加方法</h4><figure class="highlight plain"><figcaption><span>```接收两个参数：一个是数组，一个是可选偏移量（默认0）</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#96;&#96;&#96; subarray() &#96;&#96;&#96;接收两个参数，可选开始参数和可选结束参数</span><br><span class="line"></span><br><span class="line">## Promise与异步编程</span><br><span class="line">### 背景</span><br><span class="line">#### 单线程</span><br><span class="line">JavaScript引擎是基于单线程事件循环的该概念构建的，同一时刻只允许一个代码块在执行。</span><br><span class="line">JavaScript引擎需要跟踪即将运行的代码，那些代码被放在一个任务队列(job queue)中，每当一段代码准备执行时，都会被添加到任务队列。每当JavaScript引擎中一段代码结束执行，事件循环(event loop)会执行队列中的下一个任务，他是JavaScript引擎的一段程序，负责监控代码执行并管理任务队列。**队列中的任务会从第一个一直执行到最后一个**。</span><br><span class="line">#### 事件模型</span><br><span class="line">事件模型适合处理简单的交互</span><br><span class="line">用户点击按钮或者按下键盘的按键会触发类似onclick这样的事件，它会向任务队列添加一个新任务来相应用户的操作。</span><br><span class="line">#### 回调模式</span><br><span class="line">&#96;&#96;&#96;JavaScript</span><br><span class="line">readFile(&quot;example.txt&quot;,function(err,content)&#123;</span><br><span class="line">    if(err)&#123;</span><br><span class="line">        throw err;</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(contents);</span><br><span class="line">&#125;);</span><br><span class="line">console.log(&quot;Hi&quot;);</span><br></pre></td></tr></table></figure><p>readFile()函数立即执行，当读取磁盘上的文件时会停止执行。此时console.log(“Hi”)会立即执行并输出”Hi”；当readFile()结束执行时，会向任务队列的末尾添加一个新任务，该任务包含回调函数及相应的参数。</p><h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><p>Promise相当于异步操作结果的占位符，它不会去订阅一个事件，也不会传递一个回调函数给目标函数，而是让函数返回一个Promise。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = readFile(<span class="string">&quot;example.txt&quot;</span>);</span><br></pre></td></tr></table></figure><p>这段代码中，readFile()不会立即读取文件，函数会先返回一个表示异步读取操作的Promise对象，未来对这个对象的操作完全取决于Promise对象的声明周期。</p><h4 id="Promise的生命周期"><a href="#Promise的生命周期" class="headerlink" title="Promise的生命周期"></a>Promise的生命周期</h4><ul><li>进行中状态(pending)，此时操作尚未完成，所以也是未处理(unsettled)</li><li>异步操作执行结束，Promise变成已处理(settled)状态。包括以下两个状态：Fulfilled –&gt; 操作完成 、 Rejected –&gt; 操作未能完成<br>Promise状态改变时，通过then()方法采取特定行动<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">另一个是当Promise状态变成rejected时调用的函数，与失败相关的数据都会传递到这个函数。</span><br><span class="line">&#96;&#96;&#96;catch()&#96;&#96;&#96;相当于只传入rejected函数的then函数</span><br><span class="line">#### 创建未完成的Promise</span><br><span class="line">用Promise构造函数可以创建新的Promise，构造函数只接收一个参数：包含初始化Promise代码的执行器函数(executor)。执行器接收两个参数，分别是resolve()函数和reject()函数。执行器成功完成时调用resolve()函数，反之，失败时调用reject()函数</span><br><span class="line">&#96;&#96;&#96;JavaScript</span><br><span class="line">const fs &#x3D; require(&quot;fs&quot;);</span><br><span class="line"></span><br><span class="line">function readFile(filename)&#123;</span><br><span class="line">    return new Promise(function(resolve,reject)&#123;</span><br><span class="line">        </span><br><span class="line">        &#x2F;&#x2F;触发异步操作</span><br><span class="line">        fs.readFile(filename,&quot;utf-8&quot;,function(err,content)&#123;</span><br><span class="line">            &#x2F;&#x2F;检查错误</span><br><span class="line">            if(err)&#123;</span><br><span class="line">                reject(err);</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">            &#x2F;&#x2F;成功读取</span><br><span class="line">            resolve(content);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">let promise &#x3D; readFile(&quot;example.txt&quot;);</span><br><span class="line">&#x2F;&#x2F;监听fulfilled和rejected状态</span><br><span class="line">promise.then(</span><br><span class="line">    (content)&#x3D;&gt;&#123;console.log(content);&#125;,</span><br><span class="line">    (err)&#x3D;&gt;&#123;console.error(err.message);&#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>创建Promise之后，执行器会立即执行，然后才执行后续代码<h4 id="创建已处理的Promise"><a href="#创建已处理的Promise" class="headerlink" title="创建已处理的Promise"></a>创建已处理的Promise</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#96;&#96;&#96;JavaScript</span><br><span class="line">let promise &#x3D; Promise(42);</span><br><span class="line">promise.then((value)&#x3D;&gt;&#123;console.log(value);&#125;);&#x2F;&#x2F;42</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#96;&#96;&#96;JavaScript</span><br><span class="line">let promise &#x3D; Promise.reject(42);</span><br><span class="line">promise.catch((value)&#x3D;&gt;&#123;console.log(value);&#125;);&#x2F;&#x2F;42</span><br></pre></td></tr></table></figure></li></ul><p><strong>如果向Promise.resolve或者Promise.reject函数传入一个promise，那么这个promise会被直接返回</strong></p><h4 id="执行器错误"><a href="#执行器错误" class="headerlink" title="执行器错误"></a>执行器错误</h4><p>如果执行器内部抛出一个错误，则Promise的拒绝处理程序就会被调用</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,reject</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;Explosion&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.catch(<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;<span class="built_in">console</span>.log(err.message);&#125;);<span class="comment">//Explosion</span></span><br></pre></td></tr></table></figure><p>每一个执行器都隐含一个try catch块</p><h4 id="全局的Promise拒绝处理"><a href="#全局的Promise拒绝处理" class="headerlink" title="全局的Promise拒绝处理"></a>全局的Promise拒绝处理</h4><p>Node.js环境的拒绝处理<br>触发process对象上两个事件：</p><ul><li>unhandledRejection 事件处理程序接收错误对象和Promise作为参数</li><li>rejectionHandled 事件处理程序接收被拒绝的Promise对象作为参数<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> rejected;</span><br><span class="line"></span><br><span class="line">process.on(<span class="string">&quot;unhandledRejection&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,promise</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err.message);<span class="comment">//&quot;Explosion&quot;</span></span><br><span class="line">    <span class="built_in">console</span>.log(rejected === promise);<span class="comment">//true</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">rejected = <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;Explosion&quot;</span>));</span><br></pre></td></tr></table></figure>浏览器环境<br>触发window对象两个事件，与Node环境完全等效<br>浏览器不同的是，两个事件都可以使用拒绝值，即第一个参数<h3 id="串联Promise"><a href="#串联Promise" class="headerlink" title="串联Promise"></a>串联Promise</h3>每次调用then()方法或者catch()方法时实际上创建并返回另一个Promise，只有当第一个Promise完成或被拒绝后，第二个才被解决<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span>  <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    resolve(<span class="number">42</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p1.then(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;).then(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;finished&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// output:</span></span><br><span class="line"><span class="comment">// 42 </span></span><br><span class="line"><span class="comment">//finished</span></span><br></pre></td></tr></table></figure><h4 id="捕获错误"><a href="#捕获错误" class="headerlink" title="捕获错误"></a>捕获错误</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span>  <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    resolve(<span class="number">42</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p1.then(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;explosion&quot;</span>);</span><br><span class="line">&#125;).catch(<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err.message);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// output:</span></span><br><span class="line"><span class="comment">// 42 </span></span><br><span class="line"><span class="comment">//explosion</span></span><br></pre></td></tr></table></figure><h4 id="Promise链的返回值"><a href="#Promise链的返回值" class="headerlink" title="Promise链的返回值"></a>Promise链的返回值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    resolve(<span class="number">42</span>);</span><br><span class="line">&#125;);</span><br><span class="line">p1.then(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">    <span class="keyword">return</span> value + <span class="number">1</span>;<span class="comment">//42</span></span><br><span class="line">&#125;).then(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);<span class="comment">//43</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>即使是拒绝处理程序中return也可以返回值到下一个promise完成处理程序<h4 id="在Promise链中返回Promise"><a href="#在Promise链中返回Promise" class="headerlink" title="在Promise链中返回Promise"></a>在Promise链中返回Promise</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    resolve(<span class="number">42</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    resolve(<span class="number">43</span>);</span><br><span class="line">&#125;);</span><br><span class="line">p1.then(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);<span class="comment">//42</span></span><br><span class="line">    <span class="keyword">return</span> p2;</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);<span class="comment">//43</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>如果p2被拒绝，就会调用拒绝程序，如果p2被完成，那么调用完成程序<h4 id="响应多个Promise"><a href="#响应多个Promise" class="headerlink" title="响应多个Promise"></a>响应多个Promise</h4><code>Promise.all()</code><br><code>Promise.race()</code><br>都只接收一个参数并返回一个Promise，该参数是一个含有多个受监视Promise的可迭代对象。<h3 id="Promise继承"><a href="#Promise继承" class="headerlink" title="Promise继承"></a>Promise继承</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myPromise</span> <span class="keyword">extends</span> <span class="title">Promise</span></span>&#123;</span><br><span class="line">    <span class="comment">//use default Constructor</span></span><br><span class="line">    <span class="function"><span class="title">success</span>(<span class="params">resolve,reject</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.then(resolve,reject);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">failure</span>(<span class="params">reject</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.catch(reject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="代理-Proxy-和反射-Reflection-API"><a href="#代理-Proxy-和反射-Reflection-API" class="headerlink" title="代理(Proxy)和反射(Reflection)API"></a>代理(Proxy)和反射(Reflection)API</h2></div><div class="post-share">分享到：</div><footer class="post-footer"><div class="post-tags"><a href="/tags/JavaScript/" rel="tag"># JavaScript</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2019-02-05-javascirpt-fundamental/" rel="next" title="Javascript fundamental"><i class="fas fa-angle-left"></i> Javascript fundamental</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2019-02-22-HTML5-web-api/" rel="prev" title="H5 Web API">H5 Web API <i class="fas fa-angle-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">关于我</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><picture><source srcset="/images/card.webp" type="image/webp"><img loading="lazy" class="site-author-image" itemprop="image" src="/images/card.jpg" alt=""></picture><p class="site-author-name" itemprop="name">everbrez</p><p class="site-description motion-element" itemprop="description">你能抓到我么？</p></div><div class="links-of-author motion-element"><span class="links-of-author-item scaleup"><a href="https://github.com/everbrez" target="_blank" title="GitHub"><i class="fab fa-github" style="color:#191717"><span>everbrez</span></i></a></span></div><div class="des-of-author"><div class="des-of-author-nav"><div class="des-of-author-title active" data-index="1">最喜欢的作品</div><div class="des-of-author-title" data-index="2">最喜欢的女孩子</div><div class="des-of-author-title" data-index="3">最喜欢的游戏</div></div><div class="des-of-author-panel"><div class="des-of-author-des active" data-index="1">路人女主的养成方法、我的青春恋爱物语果然有问题</div><div class="des-of-author-des" data-index="2">加藤惠</div><div class="des-of-author-des" data-index="3">Minecraft</div></div></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ES6"><span class="nav-number">1.</span> <span class="nav-text">ES6</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9D%97%E7%8A%B6%E4%BD%9C%E7%94%A8%E5%9F%9F%E7%9A%84%E7%BB%91%E5%AE%9A"><span class="nav-number">1.1.</span> <span class="nav-text">块状作用域的绑定</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BB%BA%E8%AE%AE%EF%BC%9A%E9%BB%98%E8%AE%A4%E4%BD%BF%E7%94%A8const%EF%BC%8C%E5%AE%9E%E5%9C%A8%E9%9C%80%E8%A6%81%E6%94%B9%E5%8F%98%E5%80%BC%E6%97%B6%E4%BD%BF%E7%94%A8let"><span class="nav-number">1.1.1.</span> <span class="nav-text">建议：默认使用const，实在需要改变值时使用let</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E6%AD%A3%E5%88%99"><span class="nav-number">1.2.</span> <span class="nav-text">字符串和正则</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E8%AF%86%E5%88%AB"><span class="nav-number">1.2.1.</span> <span class="nav-text">子字符串的识别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%87%8D%E5%A4%8D"><span class="nav-number">1.2.2.</span> <span class="nav-text">字符串的重复</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E5%A4%8D%E5%88%B6"><span class="nav-number">1.2.3.</span> <span class="nav-text">正则表达式的复制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="nav-number">1.2.4.</span> <span class="nav-text">获取修饰符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E6%9D%BF%E5%AD%97%E9%9D%A2%E9%87%8F"><span class="nav-number">1.2.5.</span> <span class="nav-text">模板字面量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">1.2.5.1.</span> <span class="nav-text">多行字符串</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8D%A0%E4%BD%8D%E7%AC%A6"><span class="nav-number">1.2.5.2.</span> <span class="nav-text">字符串占位符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%87%E7%AD%BE%E6%A8%A1%E6%9D%BF"><span class="nav-number">1.2.5.3.</span> <span class="nav-text">标签模板</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%A7%8B%E5%80%BC"><span class="nav-number">1.2.5.4.</span> <span class="nav-text">使用原始值</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-number">1.3.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0%E5%80%BC"><span class="nav-number">1.3.1.</span> <span class="nav-text">函数默认参数值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#arguments%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.3.2.</span> <span class="nav-text">arguments对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8D%E5%AE%9A%E5%8F%82%E6%95%B0"><span class="nav-number">1.3.3.</span> <span class="nav-text">不定参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%95%E5%BC%80%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">1.3.4.</span> <span class="nav-text">展开运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#new-target"><span class="nav-number">1.3.5.</span> <span class="nav-text">new.target</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9D%97%E7%8A%B6%E5%87%BD%E6%95%B0"><span class="nav-number">1.3.6.</span> <span class="nav-text">块状函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0"><span class="nav-number">1.3.7.</span> <span class="nav-text">箭头函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%BE%E8%B0%83%E7%94%A8%E4%BC%98%E5%8C%96"><span class="nav-number">1.3.8.</span> <span class="nav-text">尾调用优化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.4.</span> <span class="nav-text">对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%88%AB"><span class="nav-number">1.4.1.</span> <span class="nav-text">对象类别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E5%88%9D%E5%A7%8B%E5%80%BC%E7%9A%84%E7%AE%80%E5%86%99"><span class="nav-number">1.4.2.</span> <span class="nav-text">对象初始值的简写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95%E7%9A%84%E7%AE%80%E5%86%99"><span class="nav-number">1.4.3.</span> <span class="nav-text">对象方法的简写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AF%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="nav-number">1.4.4.</span> <span class="nav-text">可计算属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95"><span class="nav-number">1.4.5.</span> <span class="nav-text">新增方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Object-is"><span class="nav-number">1.4.5.1.</span> <span class="nav-text">Object.is()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Object-assign"><span class="nav-number">1.4.5.2.</span> <span class="nav-text">Object.assign()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Object-setPrototypeOf"><span class="nav-number">1.4.5.3.</span> <span class="nav-text">Object.setPrototypeOf()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#super"><span class="nav-number">1.4.5.4.</span> <span class="nav-text">super</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E6%9E%84"><span class="nav-number">1.5.</span> <span class="nav-text">解构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E8%A7%A3%E6%9E%84"><span class="nav-number">1.5.1.</span> <span class="nav-text">对象解构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC"><span class="nav-number">1.5.1.1.</span> <span class="nav-text">解构赋值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E5%AE%9A%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="nav-number">1.5.1.2.</span> <span class="nav-text">设定默认值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%9E%E5%90%8C%E5%90%8D%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC"><span class="nav-number">1.5.1.3.</span> <span class="nav-text">非同名变量赋值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B5%8C%E5%A5%97%E5%AF%B9%E8%B1%A1%E8%A7%A3%E6%9E%84"><span class="nav-number">1.5.1.4.</span> <span class="nav-text">嵌套对象解构</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E8%A7%A3%E6%9E%84"><span class="nav-number">1.5.2.</span> <span class="nav-text">数组解构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8D%E5%AE%9A%E5%85%83%E7%B4%A0"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">不定元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E5%BA%94%E7%94%A8"><span class="nav-number">1.5.2.2.</span> <span class="nav-text">高级应用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E6%9E%84%E5%8F%82%E6%95%B0"><span class="nav-number">1.5.2.3.</span> <span class="nav-text">解构参数</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Symbol"><span class="nav-number">1.6.</span> <span class="nav-text">Symbol</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Symbol%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">1.6.1.</span> <span class="nav-text">Symbol的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Symbol%E5%85%B1%E4%BA%AB%E4%BD%93%E7%B3%BB"><span class="nav-number">1.6.2.</span> <span class="nav-text">Symbol共享体系</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Set%E4%B8%8EMap%E9%9B%86%E5%90%88"><span class="nav-number">1.7.</span> <span class="nav-text">Set与Map集合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Set%E9%9B%86%E5%90%88"><span class="nav-number">1.7.1.</span> <span class="nav-text">Set集合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#forEach"><span class="nav-number">1.7.2.</span> <span class="nav-text">forEach()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Set%E5%92%8C%E6%95%B0%E7%BB%84%E4%BA%92%E7%9B%B8%E8%BD%AC%E5%8C%96"><span class="nav-number">1.7.3.</span> <span class="nav-text">Set和数组互相转化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Weak-Set"><span class="nav-number">1.7.4.</span> <span class="nav-text">Weak Set</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Map%E9%9B%86%E5%90%88"><span class="nav-number">1.7.5.</span> <span class="nav-text">Map集合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Map-%E4%B8%8E-Array"><span class="nav-number">1.7.6.</span> <span class="nav-text">Map 与 Array</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#forEach-1"><span class="nav-number">1.7.7.</span> <span class="nav-text">forEach()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#WeakMap"><span class="nav-number">1.7.8.</span> <span class="nav-text">WeakMap</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Iterator-and-Generator"><span class="nav-number">1.8.</span> <span class="nav-text">Iterator and Generator</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87Symbol-iterator%E8%AE%BF%E9%97%AE%E9%BB%98%E8%AE%A4%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="nav-number">1.8.0.1.</span> <span class="nav-text">通过Symbol.iterator访问默认迭代器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E5%BB%BA%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="nav-number">1.8.1.</span> <span class="nav-text">内建迭代器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%8A%9F%E8%83%BD"><span class="nav-number">1.8.2.</span> <span class="nav-text">高级迭代器功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%99%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0"><span class="nav-number">1.8.2.1.</span> <span class="nav-text">给迭代器传递参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%8A%9B%E5%87%BA%E9%94%99%E8%AF%AF"><span class="nav-number">1.8.2.2.</span> <span class="nav-text">在迭代器抛出错误</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E5%99%A8%E8%BF%94%E5%9B%9E%E8%AF%AD%E5%8F%A5"><span class="nav-number">1.8.2.3.</span> <span class="nav-text">生成器返回语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A7%94%E6%89%98%E7%94%9F%E6%88%90%E5%99%A8"><span class="nav-number">1.8.2.4.</span> <span class="nav-text">委托生成器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1%E6%89%A7%E8%A1%8C"><span class="nav-number">1.8.2.5.</span> <span class="nav-text">异步任务执行</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JavaScript%E4%B8%AD%E7%9A%84%E7%B1%BB"><span class="nav-number">1.9.</span> <span class="nav-text">JavaScript中的类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E7%B1%BB%E5%A3%B0%E6%98%8E%E8%AF%AD%E6%B3%95"><span class="nav-number">1.9.1.</span> <span class="nav-text">基本的类声明语法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%B1%BB%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">1.9.1.0.1.</span> <span class="nav-text">类表达式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E5%91%BD%E5%90%8D%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">1.9.1.1.</span> <span class="nav-text">类命名表达式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E5%99%A8%E5%B1%9E%E6%80%A7"><span class="nav-number">1.9.2.</span> <span class="nav-text">访问器属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E5%99%A8%E6%96%B9%E6%B3%95"><span class="nav-number">1.9.3.</span> <span class="nav-text">生成器方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E6%88%90%E5%91%98"><span class="nav-number">1.9.4.</span> <span class="nav-text">静态成员</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%A7%E6%89%BF%E4%B8%8E%E6%B4%BE%E7%94%9F%E7%B1%BB"><span class="nav-number">1.9.5.</span> <span class="nav-text">继承与派生类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B4%BE%E7%94%9F%E7%B1%BB%E4%B8%AD%E5%8F%AF%E4%BB%A5%E7%BB%A7%E6%89%BF%E5%9F%BA%E7%B1%BB%E7%9A%84%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="nav-number">1.9.5.1.</span> <span class="nav-text">派生类中可以继承基类的静态方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B4%BE%E7%94%9F%E8%87%AA%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E7%B1%BB"><span class="nav-number">1.9.6.</span> <span class="nav-text">派生自表达式的类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%85%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%BB%A7%E6%89%BF"><span class="nav-number">1.9.6.1.</span> <span class="nav-text">内建对象的继承</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Symbol-species%E5%B1%9E%E6%80%A7"><span class="nav-number">1.9.7.</span> <span class="nav-text">Symbol.species属性</span></a></li></ol><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%94%B9%E8%BF%9B%E6%95%B0%E7%BB%84%E5%8A%9F%E8%83%BD"><span class="nav-number">1.10.</span> <span class="nav-text">改进数组功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E8%A7%86%E5%9B%BE%E6%93%8D%E4%BD%9C%E6%95%B0%E7%BB%84%E7%BC%93%E5%86%B2%E5%8C%BA"><span class="nav-number">1.10.0.1.</span> <span class="nav-text">通过视图操作数组缓冲区</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E8%A7%86%E5%9B%BE%E4%BF%A1%E6%81%AF"><span class="nav-number">1.10.0.2.</span> <span class="nav-text">获取视图信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%BB%E5%86%99%E6%95%B0%E6%8D%AE"><span class="nav-number">1.10.0.3.</span> <span class="nav-text">读写数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E5%9E%8B%E6%95%B0%E7%BB%84"><span class="nav-number">1.10.0.4.</span> <span class="nav-text">定型数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%AE%9A%E5%9E%8B%E6%95%B0%E7%BB%84"><span class="nav-number">1.10.0.5.</span> <span class="nav-text">创建定型数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%99%84%E5%8A%A0%E6%96%B9%E6%B3%95"><span class="nav-number">1.10.0.6.</span> <span class="nav-text">附加方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Promise"><span class="nav-number">1.10.1.</span> <span class="nav-text">Promise</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Promise%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">1.10.1.1.</span> <span class="nav-text">Promise的生命周期</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%B7%B2%E5%A4%84%E7%90%86%E7%9A%84Promise"><span class="nav-number">1.10.1.2.</span> <span class="nav-text">创建已处理的Promise</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E5%99%A8%E9%94%99%E8%AF%AF"><span class="nav-number">1.10.1.3.</span> <span class="nav-text">执行器错误</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E7%9A%84Promise%E6%8B%92%E7%BB%9D%E5%A4%84%E7%90%86"><span class="nav-number">1.10.1.4.</span> <span class="nav-text">全局的Promise拒绝处理</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%B2%E8%81%94Promise"><span class="nav-number">1.10.2.</span> <span class="nav-text">串联Promise</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8D%95%E8%8E%B7%E9%94%99%E8%AF%AF"><span class="nav-number">1.10.2.1.</span> <span class="nav-text">捕获错误</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Promise%E9%93%BE%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-number">1.10.2.2.</span> <span class="nav-text">Promise链的返回值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8Promise%E9%93%BE%E4%B8%AD%E8%BF%94%E5%9B%9EPromise"><span class="nav-number">1.10.2.3.</span> <span class="nav-text">在Promise链中返回Promise</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E5%A4%9A%E4%B8%AAPromise"><span class="nav-number">1.10.2.4.</span> <span class="nav-text">响应多个Promise</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Promise%E7%BB%A7%E6%89%BF"><span class="nav-number">1.10.3.</span> <span class="nav-text">Promise继承</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E7%90%86-Proxy-%E5%92%8C%E5%8F%8D%E5%B0%84-Reflection-API"><span class="nav-number">1.11.</span> <span class="nav-text">代理(Proxy)和反射(Reflection)API</span></a></li></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-image"><picture><source srcset="https://cdn.jsdelivr.net/gh/DIYgod/diygod.me@gh-pages/images/footer.webp" type="image/webp"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/DIYgod/diygod.me@gh-pages/images/footer.png"></picture></div><div class="footer-inner"><p>博客已萌萌哒运行<span id="since"></span><span class="my-face">(●'◡'●)ﾉ♥</span></p><p>© <span itemprop="copyrightYear">2021</span> Hi, いざよい. 由 <a href="https://hexo.io/" target="_blank" class="external" rel="nofollow">Hexo</a> 强力驱动. Theme By <a href="https://github.com/DIYgod/hexo-theme-sagiri" target="_blank" class="external" rel="nofollow">Sagiri</a> v0.0.74. <a href="/sitemap.xml" target="_blank">站点地图</a>.</p><p>Made with <i class="fas fa-heart throb" style="color:#d43f57"></i> by <span class="author" itemprop="copyrightHolder">everbrez</span>.</p></div></footer><div class="back-to-top"><picture><source srcset="https://cdn.jsdelivr.net/gh/DIYgod/diygod.me@gh-pages/images/scroll.webp" type="image/webp"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/DIYgod/diygod.me@gh-pages/images/scroll.png"></picture></div><canvas id="evanyou"></canvas></div><script type="text/javascript" src="/js/sagiri.min.js?v=0.0.74"></script><script>"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js")})</script></body></html>