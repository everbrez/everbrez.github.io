<!DOCTYPE html><html class="theme-next pisces" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#fff"><link rel="preload" href="https://cdn.jsdelivr.net/gh/DIYgod/diygod.me@gh-pages/fonts/Candyshop.otf" as="font" type="font/otf" crossorigin="anonymous"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css"><link href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css" rel="stylesheet" type="text/css"><link href="/css/main.css?v=0.0.74" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=0.0.74"><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon.ico?v=0.0.74"><link rel="mask-icon" href="/safari-pinned-tab.svg?v=0.0.74" color="#fff"><link rel="manifest" href="/manifest.json"><meta name="keywords" content="JavaScript React,"><link rel="alternate" href="/atom.xml" title="Hi, いざよい" type="application/atom+xml"><meta name="description" content="MVC MV* model 用来封装与应用程序的业务逻辑相关的数据以及对数据的处理方法，会有一个或多个视图监听此模型。一旦模型的数据发生变化，模型将通知有关的视图。(有操作数据的方法) view 视图，当模型发生变化的时候，视图相应得到刷新自己的机会 controller 定义用户界面对用户输入的相应方式，起到不同层面的组织作用，用于控制应用程序的流程，它处理用户行为和数据model的改变。它"><meta property="og:type" content="article"><meta property="og:title" content="react"><meta property="og:url" content="https://everbrez.github.io/2019-02-17-react/index.html"><meta property="og:site_name" content="Hi, いざよい"><meta property="og:description" content="MVC MV* model 用来封装与应用程序的业务逻辑相关的数据以及对数据的处理方法，会有一个或多个视图监听此模型。一旦模型的数据发生变化，模型将通知有关的视图。(有操作数据的方法) view 视图，当模型发生变化的时候，视图相应得到刷新自己的机会 controller 定义用户界面对用户输入的相应方式，起到不同层面的组织作用，用于控制应用程序的流程，它处理用户行为和数据model的改变。它"><meta property="og:locale"><meta property="og:image" content="https://everbrez.github.io/assets/images/mvc.png"><meta property="article:published_time" content="2019-02-17T00:00:00.000Z"><meta property="article:modified_time" content="2021-04-18T11:35:02.437Z"><meta property="article:author" content="everbrez"><meta property="article:tag" content="JavaScript React"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://everbrez.github.io/assets/images/mvc.png"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"",scheme:"Pisces",version:"0.0.74",sidebar:{position:"right",display:"always",offset:52,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!1,tabs:!0,motion:{enable:!1,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},since:"4/18/2021 18:00:00",site:{title:"",subtitle:"",author:""},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},leancloud:{enable:!1,appID:"",appKey:""},favicon:{visibilitychange:!0,narmal:"/assets/favicon.ico",hidden:"/assets/favicon.ico",show_text:"(/≧▽≦/)咦！又好了！",hide_text:"(●—●)喔哟，崩溃啦！"}}</script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/disqusjs@1.2.2/dist/disqus.js"></script><link rel="canonical" href="https://everbrez.github.io/2019-02-17-react/"><title>react | Hi, いざよい</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans" class="theme-darling"><div class="container sidebar-position-right page-post-detail"><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-首页"><a href="/" rel="section"><i class="menu-item-icon fas fa-meteor"></i><br>首页</a></li><li class="menu-item menu-item-归档"><a href="/archives/" rel="section"><i class="menu-item-icon fas fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-关于我"><a href="/about/" rel="section"><i class="menu-item-icon fas fa-heartbeat"></i><br>关于我</a></li><li class="menu-item search"><form class="search-form"><input name="keyword" type="text" class="search-input" placeholder="站内搜索"> <button type="submit" class="search-submit"><i class="fas fa-search"></i></button></form></li></ul></nav><div class="site-brand-wrapper"><div class="site-brand-bg"><picture><source srcset="https://cdn.jsdelivr.net/gh/DIYgod/diygod.me@gh-pages/images/header-gyx-s.webp" type="image/webp" media="(max-width: 500px)"><source srcset="https://cdn.jsdelivr.net/gh/DIYgod/diygod.me@gh-pages/images/header-gyx-s.png" type="image/png" media="(max-width: 500px)"><source srcset="https://cdn.jsdelivr.net/gh/DIYgod/diygod.me@gh-pages/images/header-gyx.webp" type="image/webp"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/DIYgod/diygod.me@gh-pages/images/header-gyx.png"></picture></div><div class="site-meta"><div class="custom-logo-site-title"><div class="brand"><span class="logo-line-before"><i></i></span><div class="site-title"><div id="animate-stroke" class="animate"><span><svg><use xlink:href="#strokeH"></use></svg> </span><span><svg><use xlink:href="#strokei"></use></svg> </span><span><svg><use xlink:href="#stroke,"></use></svg> </span><span><svg><use xlink:href="#stroke "></use></svg> </span><span><svg><use xlink:href="#strokeい"></use></svg> </span><span><svg><use xlink:href="#strokeざ"></use></svg> </span><span><svg><use xlink:href="#strokeよ"></use></svg> </span><span><svg><use xlink:href="#strokeい"></use></svg></span></div><div id="animate" class="animate"><span><svg><text id="strokeH">H</text></svg> </span><span><svg><text id="strokei">i</text></svg> </span><span><svg><text id="stroke,">,</text></svg> </span><span><svg><text id="stroke "></text></svg> </span><span><svg><text id="strokeい">い</text></svg> </span><span><svg><text id="strokeざ">ざ</text></svg> </span><span><svg><text id="strokeよ">よ</text></svg> </span><span><svg><text id="strokeい">い</text></svg></span></div><div id="guide" class="guide"><span>H</span><span>i</span><span>,</span><span> </span><span>い</span><span>ざ</span><span>よ</span><span>い</span></div></div><span class="logo-line-after"><i></i></span></div></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><div class="site-master" itemprop="author" itemscope itemtype="http://schema.org/Person"><picture><source srcset="/assets/images/avatar.webp" type="image/webp"><img loading="lazy" class="site-master-avatar scaleup" itemprop="image" src="/assets/images/avatar.jpg" alt=""></picture><h2 class="site-master-description scaleup" itemprop="description">If I could be the hero</h2></div></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-date"><div class="post-month">02月</div><div class="post-day">17</div></div><div class="post-badge"><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a></span></div><div class="post-block"><link itemprop="mainEntityOfPage" href="https://everbrez.github.io/2019-02-17-react/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content=""><meta itemprop="description" content=""><meta itemprop="image" content="/assets/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Hi, いざよい"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">react</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-17T00:00:00+00:00">2019-02-17</time> </span><span class="post-wordcount"><span class="post-meta-divider">•</span> <span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">字数统计</span> <span title="字数统计">2986</span></span></div></header><div class="post-body" itemprop="articleBody"><div class="post-toc-content"><div class="post-toc-title">文章目录</div><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#MVC"><span class="nav-text">MVC</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB%EF%BC%9A"><span class="nav-text">调用关系：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MVP"><span class="nav-text">MVP</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB"><span class="nav-text">调用关系</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MVVM"><span class="nav-text">MVVM</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#flux"><span class="nav-text">flux</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#control-view"><span class="nav-text">control view</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dispatcher"><span class="nav-text">dispatcher</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Virtual-DOM"><span class="nav-text">Virtual DOM</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#router-control"><span class="nav-text">router control</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#lifecycle"><span class="nav-text">lifecycle</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#communication"><span class="nav-text">communication</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HOC-amp-mixins"><span class="nav-text">HOC &amp; mixins</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#event"><span class="nav-text">event</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#React"><span class="nav-text">React</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#element-amp-component"><span class="nav-text">element &amp; component</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#state-amp-props"><span class="nav-text">state &amp; props</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dataflow"><span class="nav-text">dataflow</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Event"><span class="nav-text">Event</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#key"><span class="nav-text">key</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#diff%E7%AE%97%E6%B3%95%C2%B7"><span class="nav-text">diff算法·</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#virtual-dom"><span class="nav-text">virtual-dom</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#stack-reconciler"><span class="nav-text">stack-reconciler</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#fiber"><span class="nav-text">fiber</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Reconciliation"><span class="nav-text">Reconciliation</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Accessibility"><span class="nav-text">Accessibility</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Lazy-amp-Suspense"><span class="nav-text">Lazy &amp; Suspense</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ErrorBoundary"><span class="nav-text">ErrorBoundary</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Context"><span class="nav-text">Context</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Context-Provider"><span class="nav-text">Context.Provider</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Class-contextType"><span class="nav-text">Class.contextType</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Context-Consumer"><span class="nav-text">Context.Consumer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ref"><span class="nav-text">Ref</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6"><span class="nav-text">高阶组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8Emixin%E5%8C%BA%E5%88%AB"><span class="nav-text">与mixin区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%A7%E8%83%BD"><span class="nav-text">性能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsx"><span class="nav-text">jsx</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Protals"><span class="nav-text">Protals</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hook"><span class="nav-text">Hook</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#state-hook"><span class="nav-text">state hook</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#effect-hook"><span class="nav-text">effect hook</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rules"><span class="nav-text">rules</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-text">前端路由的实现</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Vue-%E5%92%8C-React-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">Vue 和 React 的区别</span></a></li></ol></div><span id="more"></span><h1 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h1><p><picture><source srcset="/assets/images/mvc.webp" type="image/webp"><img loading="lazy" src="/assets/images/mvc.png" alt="MVC"></picture></p><p><a target="_blank" rel="noopener" href="https://github.com/livoras/blog/issues/11">MV*</a></p><p><code>model</code> 用来封装与应用程序的业务逻辑相关的数据以及对数据的处理方法，会有一个或多个视图监听此模型。一旦模型的数据发生变化，模型将通知有关的视图。(有操作数据的方法)</p><p><code>view</code> 视图，当模型发生变化的时候，视图相应得到刷新自己的机会</p><p><code>controller</code> 定义用户界面对用户输入的相应方式，起到不同层面的组织作用，用于控制应用程序的流程，它处理用户行为和数据<code>model</code>的改变。它的职责为进行Model和View之间的协作（路由、输入预处理等）的应用逻辑（application logic）。</p><p>其中：<code>view</code>和<code>model</code>之间是观察者模式，<code>view</code>观察<code>model</code>，实现在<code>model</code>上注册，以便<code>view</code>可以了解在数据<code>model</code>上发生的改变<br><code>view</code>和<code>controller</code>是策略模式，<code>view</code>可以使用<code>controller</code>的方法</p><p>Controller和View都依赖Model层</p><h2 id="调用关系："><a href="#调用关系：" class="headerlink" title="调用关系："></a>调用关系：</h2><p>用户的对View操作以后，View捕获到这个操作，会把处理的权利交移给Controller（Pass calls）；Controller会对来自View数据进行预处理、决定调用哪个Model的接口；然后由Model执行相关的业务逻辑；当Model变更了以后，会通过观察者模式（Observer Pattern）通知View；View通过观察者模式收到Model变更的消息以后，会向Model请求最新的数据，然后重新更新界面。</p><p>需要注意的地方：</p><ol><li>View是把控制权交移给Controller，Controller执行应用程序相关的应用逻辑（对来自View数据进行预处理、决定调用哪个Model的接口等等）。</li><li>Controller操作Model，Model执行业务逻辑对数据进行处理。但不会直接操作View，可以说它是对View无知的。</li><li>View和Model的同步消息是通过观察者模式进行，而同步操作是由View自己请求Model的数据然后对视图进行更新。</li></ol><p>缺点：</p><ol><li>View无法组件化。View是强依赖特定的Model的</li></ol><h1 id="MVP"><a href="#MVP" class="headerlink" title="MVP"></a>MVP</h1><p>Model View Presenter 为MVC的一种衍生模式</p><p>切入点：解决<code>controller</code>和<code>view</code>的捆绑关系，将其进行改造，使<code>view</code>不仅拥有UI组件的结构，还拥有处理用户事件的能力。此时<code>view</code>不能调用<code>model</code>的方法，所以只能让<code>presenter</code>取更新<code>model</code>，在通过观察者模式更新<code>view</code>。<br>相比与传统MVC，解耦了<code>model</code>和<code>view</code>，完全分离视图和模型，使职责划分更加清晰。可以将<code>view</code>抽象出来做成组件。</p><p>（<code>controller</code>可以在<code>view</code>中复用）。</p><p>应用逻辑主要集中在<code>presenter</code>这一层中。缺点：手动更新</p><h2 id="调用关系"><a href="#调用关系" class="headerlink" title="调用关系"></a>调用关系</h2><p>和MVC模式一样，用户对View的操作都会从View交移给Presenter。Presenter会执行相应的应用程序逻辑，并且对Model进行相应的操作；而这时候Model执行完业务逻辑以后，也是通过观察者模式把自己变更的消息传递出去，但是是传给Presenter而不是View。Presenter获取到Model变更的消息以后，<strong>通过View提供的接口更新界面</strong>。</p><h1 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h1><p>最重要的使数据绑定，data-binding。</p><p>view和model不知道彼此的存在，同MVP一样，将view和model清晰地分离开，如果viewmodel的属性值改变了，这些新值通过数据绑定自动传递给view，反过来，viewmodel会暴露model中数据和特定状态给view。</p><p>此时的model是单纯的数据，不包含对数据的操作</p><p>Vue双向数据绑定：通过Object.defineProperty来实现绑定</p><p><a target="_blank" rel="noopener" href="https://juejin.im/post/593021272f301e0058273468#heading-9">vue的双向数据绑定</a></p><h1 id="flux"><a href="#flux" class="headerlink" title="flux"></a>flux</h1><p>Flux将一个应用分成四个组成部分：</p><ul><li>View：视图</li><li>Action：一个对象，视图发出的信息，包含一个type以及数据</li><li>Dispatcher：接收Actions，执行回调函数</li><li>Store：数据层，用来存放应用状态，提醒Views更新页面</li></ul><p>Predictable<br>特点：单项数据流动</p><h2 id="control-view"><a href="#control-view" class="headerlink" title="control view"></a>control view</h2><p>用来保存状态，监听store的变化，然后数据转发给子组件。<br>子组件不包含所有的状态，为纯组件。</p><h2 id="dispatcher"><a href="#dispatcher" class="headerlink" title="dispatcher"></a>dispatcher</h2><p>将action派发到store，dispatcher只有一个，而且是全局的。</p><h1 id="Virtual-DOM"><a href="#Virtual-DOM" class="headerlink" title="Virtual DOM"></a>Virtual DOM</h1><h1 id="router-control"><a href="#router-control" class="headerlink" title="router control"></a>router control</h1><h1 id="lifecycle"><a href="#lifecycle" class="headerlink" title="lifecycle"></a>lifecycle</h1><h1 id="communication"><a href="#communication" class="headerlink" title="communication"></a>communication</h1><h1 id="HOC-amp-mixins"><a href="#HOC-amp-mixins" class="headerlink" title="HOC &amp; mixins"></a>HOC &amp; mixins</h1><h1 id="event"><a href="#event" class="headerlink" title="event"></a>event</h1><h1 id="React"><a href="#React" class="headerlink" title="React"></a>React</h1><h2 id="element-amp-component"><a href="#element-amp-component" class="headerlink" title="element &amp; component"></a>element &amp; component</h2><p>element是由component生成的，element是一个对象，component是一个构造函数。<br>element是immutable（不能改变）的，一旦创建了就不能更改element的children、attributes等属性。</p><h2 id="state-amp-props"><a href="#state-amp-props" class="headerlink" title="state &amp; props"></a>state &amp; props</h2><p>props只能读，不能更改。所有的React Component 必须像纯函数那样对待他们的props</p><p><code>this.props</code> 与 <code>this.state</code> 可能被异步更新，所以不能依靠他们来计算下一个<code>state</code>，要使用回调函数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.setState(<span class="function">(<span class="params">state, props</span>) =&gt;</span> (&#123;<span class="attr">counter</span>: state.counter + props.counter&#125;))</span><br></pre></td></tr></table></figure><h2 id="dataflow"><a href="#dataflow" class="headerlink" title="dataflow"></a>dataflow</h2><p>top-down/ unidirectional 数据流<br>state只能被特定的组件所拥有，所有的state数据更新只能影响这个组件树下层的组件</p><h2 id="Event"><a href="#Event" class="headerlink" title="Event"></a>Event</h2><p>React的event使用驼峰写法，而不是全部小写<br>将一个函数传给下一个组件的事件，而不是字符串<br>（不能return false来阻止默认行为，只能使用preventDefault来）<br>React的事件是一个合成事件。所以不需要担心浏览器兼容性</p><h2 id="key"><a href="#key" class="headerlink" title="key"></a>key</h2><p><a target="_blank" rel="noopener" href="http://taobaofed.org/blog/2016/08/25/react-key/">react-key</a></p><p>注意key相同可能引发错误，使用index作为key也可能引发错误。</p><p>以下三个条件满足的情况下中可以使用index作为key：</p><ul><li>list中的数据不会改变（即不会重新计算）</li><li>list不会过滤或者重新保存（如排序）</li><li>list中item没有唯一的id</li></ul><h3 id="diff算法·"><a href="#diff算法·" class="headerlink" title="diff算法·"></a>diff算法·</h3><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/20346379">diff-algorithm</a></p><p>基于假设：</p><ol><li>两个不同type的element会生成不同的树</li><li>可以增加一个key prop来指定哪个element是不变的</li></ol><h3 id="virtual-dom"><a href="#virtual-dom" class="headerlink" title="virtual-dom"></a>virtual-dom</h3><p>尝试去最小化回流/重绘步骤，从而在大型且复杂的项目中得到更好的性能</p><p><code>virtual-dom ---&gt; fiber</code></p><p><a target="_blank" rel="noopener" href="https://github.com/livoras/blog/issues/13">virtual-dom</a></p><h4 id="stack-reconciler"><a href="#stack-reconciler" class="headerlink" title="stack-reconciler"></a>stack-reconciler</h4><h4 id="fiber"><a href="#fiber" class="headerlink" title="fiber"></a>fiber</h4><p><a target="_blank" rel="noopener" href="http://www.ayqy.net/blog/dive-into-react-fiber/">完全理解React Fiber</a></p><p><a target="_blank" rel="noopener" href="https://juejin.im/post/5ab7b3a2f265da2378403e57">React Fiber</a></p><p><a target="_blank" rel="noopener" href="https://medium.com/react-in-depth/inside-fiber-in-depth-overview-of-the-new-reconciliation-algorithm-in-react-e1c04700ef6e">Inside Fiber: in-depth overview of the new reconciliation algorithm in React</a></p><p><a target="_blank" rel="noopener" href="https://medium.com/react-in-depth/the-how-and-why-on-reacts-usage-of-linked-list-in-fiber-67f1014d0eb7">the-how-and-why-on-reacts-usage-of-linked-list-in-fiber</a></p><h4 id="Reconciliation"><a href="#Reconciliation" class="headerlink" title="Reconciliation"></a>Reconciliation</h4><h2 id="Accessibility"><a href="#Accessibility" class="headerlink" title="Accessibility"></a>Accessibility</h2><p><a target="_blank" rel="noopener" href="https://a11yproject.com/checklist.html">checklist</a></p><h2 id="Lazy-amp-Suspense"><a href="#Lazy-amp-Suspense" class="headerlink" title="Lazy &amp; Suspense"></a>Lazy &amp; Suspense</h2><p>lazy接收一个含有<code>import</code>语句的回调，这个回调返回一个promise，（promise中必须有一个包含组件default export）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Component = React.lazy(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./component&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyComponent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Suspense fallback=&#123;<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>loading<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&#125;&gt;</span><br><span class="line">      &lt;Component /&gt;</span><br><span class="line">    &lt;/Suspense&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ErrorBoundary"><a href="#ErrorBoundary" class="headerlink" title="ErrorBoundary"></a>ErrorBoundary</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ErrorBoundary</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props)</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      error: <span class="literal">false</span>,</span><br><span class="line">      msg: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="title">getDerivedStateFromError</span>(<span class="params">err</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      error: <span class="literal">true</span>,</span><br><span class="line">      msg: error.message</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidCatch</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; error, msg &#125; = <span class="built_in">this</span>.state</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;&gt;</span><br><span class="line">      &#123;error ? <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>error: &#123;msg&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span> : <span class="built_in">this</span>.props.children&#125;</span><br><span class="line">      &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Error boundaries 不捕获下面的错误</p><ul><li>event handle</li><li>异步代码</li><li>服务器端渲染</li><li>Error boundaries 自己抛出的错误</li></ul><p>只有class组件才有error boundaries，与catch工作原理类似</p><p>在React 16 之后， 如果errors没有被catch，那么会把整个react组件树卸载。</p><h2 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h2><p><code>const MyContext = React.createContext(defaultValue)</code><br><code>defaultValue</code>只有在一个组件上方没有任何的<code>provider</code>的时候使用。</p><h3 id="Context-Provider"><a href="#Context-Provider" class="headerlink" title="Context.Provider"></a>Context.Provider</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Context.Provider value=&#123;<span class="comment">/* some value */</span>&#125; /&gt;</span><br></pre></td></tr></table></figure><p>其中上方的value一般不使用字面量对象，一般使用this.state。因为如果是使用字面量对象，每次rerender的时候就会重新创建一个对象</p><h3 id="Class-contextType"><a href="#Class-contextType" class="headerlink" title="Class.contextType"></a>Class.contextType</h3><h3 id="Context-Consumer"><a href="#Context-Consumer" class="headerlink" title="Context.Consumer"></a>Context.Consumer</h3><h3 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h3><p>ref 不是props的属性，如果需要实现穿越组件传递ref，需要使用下面的api</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">React.forwardRef(<span class="function"><span class="keyword">function</span>(<span class="params">props, ref</span>) </span>&#123;...&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logProps</span>(<span class="params">Component</span>) </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">logProps</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;forwardedRef, ...rest&#125; = <span class="built_in">this</span>.props</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Component</span> <span class="attr">ref</span>=<span class="string">&#123;forwardedRef&#125;</span> &#123;<span class="attr">...rest</span>&#125; /&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> React.forwardRef(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">LogProps</span> &#123;<span class="attr">...props</span>&#125; <span class="attr">forwardedRef</span>=<span class="string">&#123;ref&#125;</span> /&gt;</span></span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>React.forwardRef</code>接收一个render函数，这个函数接收两个props、ref</p><p>使用<code>React.createRef</code>不能使用在函数组件上，因为函数组件没有实例。</p><h2 id="高阶组件"><a href="#高阶组件" class="headerlink" title="高阶组件"></a>高阶组件</h2><p>与复合组件区别：<a target="_blank" rel="noopener" href="https://github.com/penouc/blog/issues/7">复合组件</a></p><p>一般而言，高阶组件是一个接收一个组件并且返回另外一个组件的函数</p><p>主要的作用是让不同组件之间共用逻辑</p><p>通常，高阶组件是一个纯函数，没有副作用</p><p>注意不要更改原组件</p><p>注意配置<code>displayName</code></p><p>不要将高阶组件放在<code>render</code>函数里面，performance以及内部state会消失（React会认为他们是不同的组件）</p><p>注意key以及ref的传递</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logProps</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="comment">//... some method</span></span><br><span class="line">    render () &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; extraProps, ...passThroughProps &#125; = <span class="built_in">this</span>.props</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;WrappedComponent injectProp=&#123;injectProp&#125; &#123;...passThroughProps&#125; /&gt; <span class="comment">//传递props以及插入props</span></span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="与mixin区别"><a href="#与mixin区别" class="headerlink" title="与mixin区别"></a>与mixin区别</h3><p><a target="_blank" rel="noopener" href="https://reactjs.org/blog/2016/07/13/mixins-considered-harmful.html">mixins-considered-harmful</a></p><p>mixin是通过使用<code>Object.defineProperty</code>来实现多个组件之间方法的共用。<br>问题：</p><ol><li>破坏了原有组件的封装，不能改变state，或者将state提升的时候很麻烦</li><li>命名冲突，mixin很难去取出或者移除</li><li>增加复杂性：增加越来越多的mixin的时候，引入越来越多的方法，造成代码逻辑复杂，不易维护。</li></ol><h3 id="性能"><a href="#性能" class="headerlink" title="性能"></a>性能</h3><ol><li>HOC不要在render定义</li><li>使用data-，代替bind来传参数</li><li>注意移除event Listener</li><li>使用<code>production</code>版本</li><li>使用<code>shouldComponentUpdate</code></li><li>key</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterButton</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">PureComponent</span> </span>&#123;</span><br><span class="line">  <span class="comment">// PureComponent封装了shouldComponentUpdate所需要的逻辑，对props和state进行浅比较</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="jsx"><a href="#jsx" class="headerlink" title="jsx"></a>jsx</h3><p>因为jsx解释出来是这样的：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;2&quot;</span>&gt;</span><br><span class="line">  <span class="number">233</span></span><br><span class="line">  &#123;value&#125;</span><br><span class="line">  &lt;Foo /&gt;</span><br><span class="line">  &lt;&gt;&lt;/&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>编译后：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">React.createElement(<span class="string">&#x27;div&#x27;</span>, </span><br><span class="line">&#123;<span class="attr">id</span>: <span class="string">&#x27;2&#x27;</span>&#125;, </span><br><span class="line"><span class="string">&#x27;233&#x27;</span>, </span><br><span class="line">value, </span><br><span class="line">React.createElement(Foo, <span class="literal">null</span>), React.createElement(React.Fragment, <span class="literal">null</span>))</span><br></pre></td></tr></table></figure><p>所以要在作用域内引入<code>React</code>才能正常工作</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 等价</span></span><br><span class="line">&lt;MyComponent message=<span class="string">&quot;&amp;lt;3&quot;</span> /&gt;</span><br><span class="line">&lt;MyComponent message=&#123;<span class="string">&#x27;&lt;3&#x27;</span>&#125; /&gt;</span><br></pre></td></tr></table></figure><p>children以及直接使用引号的html是没有转义的，因此可以像写HTML那样使用</p><p><code>false</code>，<code>null</code>，<code>undefined</code>，<code>true</code>会被忽略</p><h3 id="Protals"><a href="#Protals" class="headerlink" title="Protals"></a>Protals</h3><p>React可以在render中将element挂载在其他的节点下：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> ReactDOM.createPortal(<span class="built_in">this</span>.props.children, domNode)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用这个API可以正常使用Context之类的功能，因为它作为一个portal存在于React tree中，（无论它处于哪个DOM tree中）</p><h2 id="Hook"><a href="#Hook" class="headerlink" title="Hook"></a>Hook</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;&#123;count&#125;&lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Hook:</p><ol><li>很难在组件之间重用一个有状态的逻辑（wrapper hell），不需要改变组件之间的关系重用逻辑</li><li>复杂组件很难被理解</li><li>兼容性</li></ol><h3 id="state-hook"><a href="#state-hook" class="headerlink" title="state hook"></a>state hook</h3><p>如果在要给render中多次调用useState，React会以相同的顺序调用他们<br>Hook就是一个钩子能够让你hook进去React函数组件的state和lifecycle（Hook不能在class中工作）</p><h3 id="effect-hook"><a href="#effect-hook" class="headerlink" title="effect hook"></a>effect hook</h3><p>获取数据，订阅，或者修改DOM这种副作用的时候使用<br>React默认在render之后执行effects（包括第一次render）<br>useEffect可以return一个函数作为callback</p><p>这个方法可以告诉React在render完成之后应该干什么，返回的函数称为clearup，React在组件unmount的时候运行这个clearup函数（React都会运行effect之前的clearup函数）==》原因：<br>如果props改变了，那么就可能会出现bug</p><p>可以告诉React跳过这个effect，使用第二个参数（数组）。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useEffext(<span class="function">() =&gt;</span> <span class="built_in">document</span>.title = <span class="string">`click <span class="subst">$&#123;count&#125;</span> times`</span>, [count])</span><br><span class="line">useEffect(<span class="function">() =&gt;</span> &#123;<span class="comment">/*do something*/</span>&#125;, []) <span class="comment">//空数组说明这个sideEffect不依靠于state，所以不需要在re-render的时候更新</span></span><br></pre></td></tr></table></figure><h3 id="rules"><a href="#rules" class="headerlink" title="rules"></a>rules</h3><ol><li>不要再循环、条件或者嵌套函数中使用hook</li><li>只在React函数组件中使用</li></ol><p>React怎么识别出哪个state是哪个useState调用的？</p><p>React根据hook被调用的顺序来判断的。（因为每次render的时候他们的顺序都不会发生改变）</p><h1 id="前端路由的实现"><a href="#前端路由的实现" class="headerlink" title="前端路由的实现"></a>前端路由的实现</h1><ol><li>hash模式，通过改变hash，监听hashchange事件来进行页面跳转</li><li>history模式，通过使用history中的新功能：history.putState和history.replaceState来改变URL（通过History模式改变URL不会引起页面的刷新，只会更新浏览器的历史纪录。）如果用户点击后退按钮，会触发popState事件</li></ol><h1 id="Vue-和-React-的区别"><a href="#Vue-和-React-的区别" class="headerlink" title="Vue 和 React 的区别"></a>Vue 和 React 的区别</h1><ol><li>Vue修改状态要简单一点，React需要使用setState来改变状态，并且需要手动优化</li><li>React使用了JSX，完全可以通过JS来控制页面，更加的灵活。Vue使用了模板语法，相比于JSX来说没有那么灵活，但是可以脱离工具链，通过直接编写render函数就能够在浏览器中运行。</li></ol></div><div class="post-share">分享到：</div><footer class="post-footer"><div class="post-tags"><a href="/tags/JavaScript-React/" rel="tag"># JavaScript React</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2019-02-17-storage/" rel="next" title="storage"><i class="fas fa-angle-left"></i> storage</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2019-02-17-performance/" rel="prev" title="performance">performance <i class="fas fa-angle-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">关于我</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><picture><source srcset="/images/card.webp" type="image/webp"><img loading="lazy" class="site-author-image" itemprop="image" src="/images/card.jpg" alt=""></picture><p class="site-author-name" itemprop="name">everbrez</p><p class="site-description motion-element" itemprop="description">你能抓到我么？</p></div><div class="links-of-author motion-element"><span class="links-of-author-item scaleup"><a href="https://github.com/everbrez" target="_blank" title="GitHub"><i class="fab fa-github" style="color:#191717"><span>everbrez</span></i></a></span></div><div class="des-of-author"><div class="des-of-author-nav"><div class="des-of-author-title active" data-index="1">最喜欢的作品</div><div class="des-of-author-title" data-index="2">最喜欢的女孩子</div><div class="des-of-author-title" data-index="3">最喜欢的游戏</div></div><div class="des-of-author-panel"><div class="des-of-author-des active" data-index="1">路人女主的养成方法、我的青春恋爱物语果然有问题</div><div class="des-of-author-des" data-index="2">加藤惠</div><div class="des-of-author-des" data-index="3">Minecraft</div></div></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#MVC"><span class="nav-number">1.</span> <span class="nav-text">MVC</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB%EF%BC%9A"><span class="nav-number">1.1.</span> <span class="nav-text">调用关系：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MVP"><span class="nav-number">2.</span> <span class="nav-text">MVP</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB"><span class="nav-number">2.1.</span> <span class="nav-text">调用关系</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MVVM"><span class="nav-number">3.</span> <span class="nav-text">MVVM</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#flux"><span class="nav-number">4.</span> <span class="nav-text">flux</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#control-view"><span class="nav-number">4.1.</span> <span class="nav-text">control view</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dispatcher"><span class="nav-number">4.2.</span> <span class="nav-text">dispatcher</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Virtual-DOM"><span class="nav-number">5.</span> <span class="nav-text">Virtual DOM</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#router-control"><span class="nav-number">6.</span> <span class="nav-text">router control</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#lifecycle"><span class="nav-number">7.</span> <span class="nav-text">lifecycle</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#communication"><span class="nav-number">8.</span> <span class="nav-text">communication</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HOC-amp-mixins"><span class="nav-number">9.</span> <span class="nav-text">HOC &amp; mixins</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#event"><span class="nav-number">10.</span> <span class="nav-text">event</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#React"><span class="nav-number">11.</span> <span class="nav-text">React</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#element-amp-component"><span class="nav-number">11.1.</span> <span class="nav-text">element &amp; component</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#state-amp-props"><span class="nav-number">11.2.</span> <span class="nav-text">state &amp; props</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dataflow"><span class="nav-number">11.3.</span> <span class="nav-text">dataflow</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Event"><span class="nav-number">11.4.</span> <span class="nav-text">Event</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#key"><span class="nav-number">11.5.</span> <span class="nav-text">key</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#diff%E7%AE%97%E6%B3%95%C2%B7"><span class="nav-number">11.5.1.</span> <span class="nav-text">diff算法·</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#virtual-dom"><span class="nav-number">11.5.2.</span> <span class="nav-text">virtual-dom</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#stack-reconciler"><span class="nav-number">11.5.2.1.</span> <span class="nav-text">stack-reconciler</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#fiber"><span class="nav-number">11.5.2.2.</span> <span class="nav-text">fiber</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Reconciliation"><span class="nav-number">11.5.2.3.</span> <span class="nav-text">Reconciliation</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Accessibility"><span class="nav-number">11.6.</span> <span class="nav-text">Accessibility</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Lazy-amp-Suspense"><span class="nav-number">11.7.</span> <span class="nav-text">Lazy &amp; Suspense</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ErrorBoundary"><span class="nav-number">11.8.</span> <span class="nav-text">ErrorBoundary</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Context"><span class="nav-number">11.9.</span> <span class="nav-text">Context</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Context-Provider"><span class="nav-number">11.9.1.</span> <span class="nav-text">Context.Provider</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Class-contextType"><span class="nav-number">11.9.2.</span> <span class="nav-text">Class.contextType</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Context-Consumer"><span class="nav-number">11.9.3.</span> <span class="nav-text">Context.Consumer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ref"><span class="nav-number">11.9.4.</span> <span class="nav-text">Ref</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6"><span class="nav-number">11.10.</span> <span class="nav-text">高阶组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8Emixin%E5%8C%BA%E5%88%AB"><span class="nav-number">11.10.1.</span> <span class="nav-text">与mixin区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%A7%E8%83%BD"><span class="nav-number">11.10.2.</span> <span class="nav-text">性能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsx"><span class="nav-number">11.10.3.</span> <span class="nav-text">jsx</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Protals"><span class="nav-number">11.10.4.</span> <span class="nav-text">Protals</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hook"><span class="nav-number">11.11.</span> <span class="nav-text">Hook</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#state-hook"><span class="nav-number">11.11.1.</span> <span class="nav-text">state hook</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#effect-hook"><span class="nav-number">11.11.2.</span> <span class="nav-text">effect hook</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rules"><span class="nav-number">11.11.3.</span> <span class="nav-text">rules</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-number">12.</span> <span class="nav-text">前端路由的实现</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Vue-%E5%92%8C-React-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">13.</span> <span class="nav-text">Vue 和 React 的区别</span></a></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-image"><picture><source srcset="https://cdn.jsdelivr.net/gh/DIYgod/diygod.me@gh-pages/images/footer.webp" type="image/webp"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/DIYgod/diygod.me@gh-pages/images/footer.png"></picture></div><div class="footer-inner"><p>博客已萌萌哒运行<span id="since"></span><span class="my-face">(●'◡'●)ﾉ♥</span></p><p>© <span itemprop="copyrightYear">2021</span> Hi, いざよい. 由 <a href="https://hexo.io/" target="_blank" class="external" rel="nofollow">Hexo</a> 强力驱动. Theme By <a href="https://github.com/DIYgod/hexo-theme-sagiri" target="_blank" class="external" rel="nofollow">Sagiri</a> v0.0.74. <a href="/sitemap.xml" target="_blank">站点地图</a>.</p><p>Made with <i class="fas fa-heart throb" style="color:#d43f57"></i> by <span class="author" itemprop="copyrightHolder">everbrez</span>.</p></div></footer><div class="back-to-top"><picture><source srcset="https://cdn.jsdelivr.net/gh/DIYgod/diygod.me@gh-pages/images/scroll.webp" type="image/webp"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/DIYgod/diygod.me@gh-pages/images/scroll.png"></picture></div><canvas id="evanyou"></canvas></div><script type="text/javascript" src="/js/sagiri.min.js?v=0.0.74"></script><script>"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js")})</script></body></html>